
// namespace Gds\Parsers\Apollo;

const PricingParser = require('../../../../../../backend/Transpiled/Gds/Parsers/Apollo/PricingParser/PricingParser.js');
const php = require('../../../../../../backend/Transpiled/phpDeprecated');

class PricingParserTest extends require('../../../../../../backend/Transpiled/Lib/TestCase.js')
{
    provideDumps()  {
        let $list;
        $list = [];

        // #0
        $list.push([
            php.implode(php.PHP_EOL, [
                '>$B/:N',
                '*FARE GUARANTEED AT TICKET ISSUANCE*',
                '',
                '*FARE HAS A PLATING CARRIER RESTRICTION*',
                'E-TKT REQUIRED',
                '*PENALTY APPLIES*',
                'LAST DATE TO PURCHASE TICKET: 25DEC13',
                '$B-1-3 C24SEP13     ',
                'SFO CX X/HKG CX MNL Q4.25 675.00VHXSPCL CX X/HKG CX SFO Q4.25',
                '800.00LHWSPCL NUC1483.50END ROE1.0',
                'FARE USD 1484.00 TAX 2.50AY TAX 34.40US TAX 5.00XA TAX 4.50XF',
                'TAX 7.00XY TAX 5.50YC TAX 285.60YR TOT USD 1828.50 ',
                'S1 NVB25DEC/NVA25DEC',
                'S2 NVB27DEC/NVA27DEC',
                'S3 NVB10JAN/NVA10JAN',
                'S4 NVB11JAN/NVA11JAN',
                'E NON-ENDORSABLE',
                'E CXNONEND/CHG-REF USD100',
                'TICKETING AGENCY 1O3K',
                'DEFAULT PLATING CARRIER CX',
                'US PFC: XF SFO4.5 ',
                'BAGGAGE ALLOWANCE',
                'ADT                                                         ',
                ' CX SFOMNL  2PC                                             ',
                '   BAG 1 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   BAG 2 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   MYTRIPANDMORE.COM/BAGGAGEDETAILSCX.BAGG',
                '                                                                 CX MNLSFO  2PC                                             ',
                '   BAG 1 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   BAG 2 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   MYTRIPANDMORE.COM/BAGGAGEDETAILSCX.BAGG',
                '                                                                CARRY ON ALLOWANCE',
                ' CX SFOHKG  1PC                                             ',
                '   BAG 1 -  NO FEE       UPTO15LB/7KG AND UPTO45LI/115LCM ',
                ' CX HKGMNL  1PC                                             ',
                '   BAG 1 -  NO FEE       UPTO15LB/7KG AND UPTO45LI/115LCM ',
                ' CX MNLHKG  1PC                                             ',
                '   BAG 1 -  NO FEE       UPTO15LB/7KG AND UPTO45LI/115LCM ',
                ' CX HKGSFO  1PC                                             ',
                '   BAG 1 -  NO FEE       UPTO15LB/7KG AND UPTO45LI/115LCM ',
                '*PENALTY APPLIES*',
                'LAST DATE TO PURCHASE TICKET: 25DEC13',
                '$B-4 C24SEP13     ',
                'SFO CX X/HKG CX MNL Q4.25 506.25VHXSPCL/CH25 CX X/HKG CX SFO',
                'Q4.25 600.00LHWSPCL/CH25 NUC1114.75END ROE1.0',
                'FARE USD 1115.00 TAX 2.50AY TAX 34.40US TAX 5.00XA TAX 4.50XF',
                'TAX 7.00XY TAX 5.50YC TAX 285.60YR TOT USD 1459.50 ',
                'S1 NVB25DEC/NVA25DEC',
                'S2 NVB27DEC/NVA27DEC',
                'S3 NVB10JAN/NVA10JAN',
                'S4 NVB11JAN/NVA11JAN',
                'E NON-ENDORSABLE',
                'E CXNONEND/CHG-REF USD100',
                'TICKETING AGENCY 1O3K',
                'DEFAULT PLATING CARRIER CX',
                'US PFC: XF SFO4.5 ',
                'BAGGAGE ALLOWANCE',
                'CNN                                                         ',
                ' CX SFOMNL  2PC                                             ',
                '   BAG 1 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   BAG 2 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   MYTRIPANDMORE.COM/BAGGAGEDETAILSCX.BAGG',
                '                                                                 CX MNLSFO  2PC                                             ',
                '   BAG 1 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   BAG 2 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   MYTRIPANDMORE.COM/BAGGAGEDETAILSCX.BAGG',
                '                                                                CARRY ON ALLOWANCE',
                ' CX SFOHKG  1PC                                             ',
                '   BAG 1 -  NO FEE       UPTO15LB/7KG AND UPTO45LI/115LCM ',
                ' CX HKGMNL  1PC                                             ',
                '   BAG 1 -  NO FEE       UPTO15LB/7KG AND UPTO45LI/115LCM ',
                ' CX MNLHKG  1PC                                             ',
                '   BAG 1 -  NO FEE       UPTO15LB/7KG AND UPTO45LI/115LCM ',
                ' CX HKGSFO  1PC                                             ',
                '   BAG 1 -  NO FEE       UPTO15LB/7KG AND UPTO45LI/115LCM ',
                'BAGGAGE DISCOUNTS MAY APPLY BASED ON FREQUENT FLYER STATUS/',
                'ONLINE CHECKIN/FORM OF PAYMENT/MILITARY/ETC.',
                '',
            ]),
            {
                'wholePricingMarkers': {
                    'fareGuaranteedAtTicketIssuance': true,
                    'fareHasPlatingCarrierRestriction': true,
                    'eTicketRequired': true,
                },
                'pricingBlockList': [
                    {
                        'penaltyApplies': true,
                        'lastDateToPurchaseTicket': {'parsed': '2013-12-25'},
                        'passengerNumbers': [1,2,3],
                        'fareConstruction': {
                            'fareAndMarkupInNuc': '1483.50',
                            'fareAndMarkup': {'amount': '1484.00'},
                            'amountCharged': {'amount': '1828.50'},
                        },
                        'notValidBA': [
                            {'number': '1','notValidBefore': '25DEC','notValidAfter': '25DEC'},
                            {'number': '2','notValidBefore': '27DEC','notValidAfter': '27DEC'},
                            {'number': '3','notValidBefore': '10JAN','notValidAfter': '10JAN'},
                            {'number': '4','notValidBefore': '11JAN','notValidAfter': '11JAN'},
                        ],
                        'endorsementBoxLine': ['NON-ENDORSABLE','CXNONEND/CHG-REF USD100'],
                        'ticketingAgencyPcc': '1O3K',
                        'defaultPlatingCarrier': 'CX',
                    },
                    {
                        'defaultPlatingCarrier': 'CX',
                        'fareConstruction': {'fareAndMarkup': {'amount': '1115.00'},'amountCharged': {'amount': '1459.50'}},
                        'penaltyApplies': true,
                        'ticketingAgencyPcc': '1O3K',
                    },
                ],
            },
        ]);

        // #1
        $list.push([
            php.implode(php.PHP_EOL, [
                '>$B/:N',
                '*FARE GUARANTEED AT TICKET ISSUANCE*',
                '',
                '*FARE HAS A PLATING CARRIER RESTRICTION*',
                'E-TKT REQUIRED',
                '*PENALTY APPLIES*',
                'LAST DATE TO PURCHASE TICKET: 26OCT13',
                '$B-1 C24SEP13     ',
                'LAX CZ X/CAN CZ MNL 230.00TPRUS6 CZ X/CAN CZ LAX 230.00TPRUS6',
                'NUC460.00END ROE1.0',
                'FARE USD 460.00 TAX 2.50AY TAX 34.40US TAX 5.00XA TAX 4.50XF',
                'TAX 7.00XY TAX 5.50YC TAX 29.40CN TAX 16.00YQ TAX 261.40YR TOT',
                'USD 825.70  ',
                'S1 NVB22NOV/NVA22NOV',
                'S2 NVB24NOV/NVA24NOV',
                'S3 NVB30NOV/NVA30NOV',
                'S4 NVB30NOV/NVA30NOV',
                'E NONEND PENALTY',
                'E NOSHOW  APPLIES',
                'TICKETING AGENCY 1O3K',
                'DEFAULT PLATING CARRIER CZ',
                'US PFC: XF LAX4.5 ',
                'BAGGAGE ALLOWANCE',
                'ADT                                                         ',
                ' CZ LAXMNL  2PC                                             ',
                '   BAG 1 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   BAG 2 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   MYTRIPANDMORE.COM/BAGGAGEDETAILSCZ.BAGG',
                '                                                                 CZ MNLLAX  2PC                                             ',
                '   BAG 1 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   BAG 2 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   MYTRIPANDMORE.COM/BAGGAGEDETAILSCZ.BAGG',
                '                                                                CARRY ON ALLOWANCE',
                ' CZ LAXCAN  1PC                                             ',
                '   BAG 1 -  NO FEE       UPTO11LB/5KG AND UPTO45LI/115LCM ',
                ' CZ CANMNL  CARRY ON ALLOWANCE DATA NOT AVAILABLE           ',
                ' CZ MNLCAN  CARRY ON ALLOWANCE DATA NOT AVAILABLE           ',
                ' CZ CANLAX  1PC                                             ',
                '   BAG 1 -  NO FEE       UPTO11LB/5KG AND UPTO45LI/115LCM ',
                'BAGGAGE DISCOUNTS MAY APPLY BASED ON FREQUENT FLYER STATUS/',
                'ONLINE CHECKIN/FORM OF PAYMENT/MILITARY/ETC.',
                '',
            ]),
            {
            },
        ]);

        // #2
        $list.push([
            php.implode(php.PHP_EOL, [
                '>$B/:N',
                '*FARE GUARANTEED AT TICKET ISSUANCE*',
                '',
                'E-TKT REQUIRED',
                '*PENALTY APPLIES*',
                'LAST DATE TO PURCHASE TICKET: 26SEP13',
                '$B-1 C24SEP13     ',
                'MNL DL NYC M370.00ULET3SBF DL X/DTT DL MNL M370.00ULET3SBF',
                'NUC740.00END ROE1.0',
                'FARE USD 740.00 TAX 5.00AY TAX 34.40US TAX 5.00XA TAX 9.00XF',
                'TAX 7.00XY TAX 5.50YC TAX 5.00OI TAX 10.30SW TAX 340.00YR TOT',
                'USD 1161.20  ',
                'S1 NVB23NOV/NVA23NOV',
                'S2 NVB28DEC/NVA28DEC',
                'S3 NVB28DEC/NVA28DEC',
                'E NONREF/PENALTY APPLIES',
                'TICKETING AGENCY 1O3K',
                'DEFAULT PLATING CARRIER DL',
                'US PFC: XF EWR4.5 DTW4.5 ',
                'BAGGAGE ALLOWANCE',
                'ADT                                                         ',
                ' DL MNLNYC  2PC                                             ',
                '   BAG 1 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   BAG 2 -  NOT PERMITTED - SEE EMBARGO BELOW             ',
                '   MYTRIPANDMORE.COM/BAGGAGEDETAILSDL.BAGG',
                '                                                                 DL EWRMNL  2PC                                             ',
                '   BAG 1 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   BAG 2 -  NOT PERMITTED - SEE EMBARGO BELOW             ',
                '   MYTRIPANDMORE.COM/BAGGAGEDETAILSDL.BAGG',
                '                                                                CARRY ON ALLOWANCE',
                ' DL MNLNYC  1PC                                             ',
                '   BAG 1 -  NO FEE       PERSONAL ITEM                    ',
                ' DL EWRDTT  1PC                                             ',
                '   BAG 1 -  NO FEE       PERSONAL ITEM                    ',
                ' DL DTTMNL  1PC                                             ',
                '   BAG 1 -  NO FEE       PERSONAL ITEM                    ',
                '                                                                EMBARGO - FOR BAGGAGE LIMITATIONS SEE ',
                ' DL MNLNYC  MYTRIPANDMORE.COM/BAGGAGEDETAILSDL.BAGG         ',
                ' DL EWRDTT  MYTRIPANDMORE.COM/BAGGAGEDETAILSDL.BAGG         ',
                ' DL DTTMNL  MYTRIPANDMORE.COM/BAGGAGEDETAILSDL.BAGG         ',
                '                                                                BAGGAGE DISCOUNTS MAY APPLY BASED ON FREQUENT FLYER STATUS/',
                'ONLINE CHECKIN/FORM OF PAYMENT/MILITARY/ETC.',
                '',
            ]),
            {
            },
        ]);

        // #3
        $list.push([
            php.implode(php.PHP_EOL, [
                '>$B/:N',
                '*FARE GUARANTEED AT TICKET ISSUANCE*',
                '',
                '*FARE HAS A PLATING CARRIER RESTRICTION*',
                'E-TKT REQUIRED',
                '*PENALTY APPLIES*',
                'LAST DATE TO PURCHASE TICKET: 10NOV13',
                '$B-1 C24SEP13     ',
                'RIX BT X/IEV PS DXB 190.64QOWEU NUC190.64END ROE0.760562',
                'FARE EUR 145.00 EQU USD 193.00 TAX 4.50LV TAX 8.70XM TAX 4.00UA',
                'TAX 2.00UD TAX 8.50YK TAX 1.40ZR TAX 113.70YQ TOT USD 335.80 ',
                'S1 NVB10NOV/NVA10NOV',
                'S2 NVB10NOV/NVA10NOV',
                'E NONEND/REF ANF CHNG RESTR',
                'TICKETING AGENCY 1O3K',
                'DEFAULT PLATING CARRIER PS',
                'RATE USED IN EQU TOTAL IS BSR 1EUR - 1.333333USD',
                'BAGGAGE ALLOWANCE',
                'ADT                                                         ',
                ' PS RIXDXB  1PC                                             ',
                '   BAG 1 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   BAG 2 -  36.00 LVL    UPTO50LB/23KG AND OVER62LI/158LCM',
                '   MYTRIPANDMORE.COM/BAGGAGEDETAILSPS.BAGG',
                '                                                                CARRY ON ALLOWANCE',
                ' BT RIXIEV  1PC                                             ',
                '   BAG 1 -  NO FEE       CARRYON HAND BAGGAGE ALLOWANCE   ',
                ' PS IEVDXB  CARRY ON ALLOWANCE DATA NOT AVAILABLE           ',
                'BAGGAGE DISCOUNTS MAY APPLY BASED ON FREQUENT FLYER STATUS/',
                'ONLINE CHECKIN/FORM OF PAYMENT/MILITARY/ETC.',
                '',
            ]),
            {
                'pricingBlockList': {
                    [0]: {
                        'bankSellingRate': '1.333333',
                        'bsrCurrencyFrom': 'EUR',
                        'bsrCurrencyTo': 'USD',
                        'fareConstruction': {
                            'rateOfExchange': '0.760562',
                        },
                    },
                },
            },
        ]);

        // #4 - ZM8LBK T:V dump
        $list.push([
            php.implode(php.PHP_EOL, [
                '>$B-*1O3K/Z0/ET',
                '*FARE GUARANTEED AT TICKET ISSUANCE*',
                '',
                'E-TKT REQUIRED',
                '*PENALTY APPLIES*',
                'LAST DATE TO PURCHASE TICKET: 30SEP13',
                '$B-1 C30SEP13     ',
                'SAN AS X/LAX DL X/TYO DL SIN M366.50XLX03PU1 DL X/TYO DL X/SEA',
                'AS SAN M366.50XLX03PU1 NUC733.00END ROE1.0',
                'FARE USD 733.00 TAX 7.50AY TAX 34.40US TAX 5.00XA TAX 13.50XF',
                'TAX 7.00XY TAX 5.50YC TAX 10.20OI TAX 20.60SW TAX 6.40OO TAX',
                '4.90OP TAX 15.90SG TAX 285.60YR TOT USD 1149.50  ',
                'S1 NVB02OCT/NVA02OCT',
                'S2 NVB02OCT/NVA02OCT',
                'S3 NVB03OCT/NVA03OCT',
                'S4 NVB14OCT/NVA14OCT',
                'S5 NVB14OCT/NVA14OCT',
                'S6 NVB14OCT/NVA14OCT',
                'E NONREF/PENALTY APPLIES',
                'TICKETING AGENCY 1O3K',
                'DEFAULT PLATING CARRIER DL',
                'US PFC: XF SAN4.5 LAX4.5 SEA4.5 ',
                'BAGGAGE ALLOWANCE',
                'ADT                                                         ',
                ' DL SANSIN  1PC                                             ',
                '   BAG 1 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   BAG 2 -  100.00 USD   UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   MYTRIPANDMORE.COM/BAGGAGEDETAILSDL.BAGG',
                '                                                                 DL SINSAN  1PC                                             ',
                '   BAG 1 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   BAG 2 -  100.00 USD   UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   MYTRIPANDMORE.COM/BAGGAGEDETAILSDL.BAGG',
                '                                                                CARRY ON ALLOWANCE',
                ' AA SANLAX  2PC                                             ',
                '   BAG 1 -  NO FEE       UPTO45LI/115LCM                  ',
                '   BAG 2 -  NO FEE       CARRYON HAND BAGGAGE ALLOWANCE   ',
                ' DL LAXTYO  1PC                                             ',
                '   BAG 1 -  NO FEE       PERSONAL ITEM                    ',
                ' DL TYOSIN  1PC                                             ',
                '   BAG 1 -  NO FEE       PERSONAL ITEM                    ',
                ' DL SINTYO  1PC                                             ',
                '   BAG 1 -  NO FEE       PERSONAL ITEM                    ',
                ' DL TYOSEA  1PC                                             ',
                '   BAG 1 -  NO FEE       PERSONAL ITEM                    ',
                ' AS SEASAN  1PC                                             ',
                '   BAG 1 -  NO FEE       CARRY ON PERSONAL ITEM           ',
                '   BAG 2 -  0.0 USD      CARRY ON PERSONAL ITEM           ',
                '   BAG 3 -  0.0 USD      CARRY ON PERSONAL ITEM           ',
                '                                                                EMBARGO - FOR BAGGAGE LIMITATIONS SEE ',
                ' AA SANLAX  MYTRIPANDMORE.COM/BAGGAGEDETAILSAA.BAGG         ',
                ' DL LAXTYO  MYTRIPANDMORE.COM/BAGGAGEDETAILSDL.BAGG         ',
                ' DL TYOSIN  MYTRIPANDMORE.COM/BAGGAGEDETAILSDL.BAGG         ',
                ' DL SINTYO  MYTRIPANDMORE.COM/BAGGAGEDETAILSDL.BAGG         ',
                ' DL TYOSEA  MYTRIPANDMORE.COM/BAGGAGEDETAILSDL.BAGG         ',
                '                                                                *PENALTY APPLIES*',
                'LAST DATE TO PURCHASE TICKET: 30SEP13',
                '$B-2 C30SEP13     ',
                'SAN AS X/LAX DL X/TYO DL SIN M366.50XLX03PU1 DL X/TYO DL X/SEA',
                'AS SAN M366.50XLX03PU1 NUC733.00END ROE1.0',
                'FARE USD 733.00 TAX 7.50AY TAX 34.40US TAX 5.00XA TAX 13.50XF',
                'TAX 7.00XY TAX 5.50YC TAX 10.20OI TAX 10.40SW TAX 6.40OO TAX',
                '4.90OP TAX 15.90SG TAX 285.60YR TOT USD 1139.30  ',
                'S1 NVB02OCT/NVA02OCT',
                'S2 NVB02OCT/NVA02OCT',
                'S3 NVB03OCT/NVA03OCT',
                'S4 NVB14OCT/NVA14OCT',
                'S5 NVB14OCT/NVA14OCT',
                'S6 NVB14OCT/NVA14OCT',
                'E NONREF/PENALTY APPLIES',
                'TICKETING AGENCY 1O3K',
                'DEFAULT PLATING CARRIER DL',
                'US PFC: XF SAN4.5 LAX4.5 SEA4.5 ',
                'BAGGAGE ALLOWANCE',
                'CNN                                                         ',
                ' DL SANSIN  1PC                                             ',
                '   BAG 1 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   BAG 2 -  100.00 USD   UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   MYTRIPANDMORE.COM/BAGGAGEDETAILSDL.BAGG',
                '                                                                 DL SINSAN  1PC                                             ',
                '   BAG 1 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   BAG 2 -  100.00 USD   UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   MYTRIPANDMORE.COM/BAGGAGEDETAILSDL.BAGG',
                '                                                                CARRY ON ALLOWANCE',
                ' AA SANLAX  2PC                                             ',
                '   BAG 1 -  NO FEE       UPTO45LI/115LCM                  ',
                '   BAG 2 -  NO FEE       CARRYON HAND BAGGAGE ALLOWANCE   ',
                ' DL LAXTYO  1PC                                             ',
                '   BAG 1 -  NO FEE       PERSONAL ITEM                    ',
                ' DL TYOSIN  1PC                                             ',
                '   BAG 1 -  NO FEE       PERSONAL ITEM                    ',
                ' DL SINTYO  1PC                                             ',
                '   BAG 1 -  NO FEE       PERSONAL ITEM                    ',
                ' DL TYOSEA  1PC                                             ',
                '   BAG 1 -  NO FEE       PERSONAL ITEM                    ',
                ' AS SEASAN  1PC                                             ',
                '   BAG 1 -  NO FEE       CARRY ON PERSONAL ITEM           ',
                '   BAG 2 -  0.0 USD      CARRY ON PERSONAL ITEM           ',
                '   BAG 3 -  0.0 USD      CARRY ON PERSONAL ITEM           ',
                '                                                                EMBARGO - FOR BAGGAGE LIMITATIONS SEE ',
                ' AA SANLAX  MYTRIPANDMORE.COM/BAGGAGEDETAILSAA.BAGG         ',
                ' DL LAXTYO  MYTRIPANDMORE.COM/BAGGAGEDETAILSDL.BAGG         ',
                ' DL TYOSIN  MYTRIPANDMORE.COM/BAGGAGEDETAILSDL.BAGG         ',
                ' DL SINTYO  MYTRIPANDMORE.COM/BAGGAGEDETAILSDL.BAGG         ',
                ' DL TYOSEA  MYTRIPANDMORE.COM/BAGGAGEDETAILSDL.BAGG         ',
                '                                                                BAGGAGE DISCOUNTS MAY APPLY BASED ON FREQUENT FLYER STATUS/',
                'ONLINE CHECKIN/FORM OF PAYMENT/MILITARY/ETC.',
                '',
            ]),
            {
            },
        ]);

        // #5 - X2BBK2 T:V dump with wrapping enabled
        $list.push([
            php.implode(php.PHP_EOL, [
                '>$B-ITN01*1O3K/:A/Z0/GB/ET',
                '*FARE HAS A PLATING CARRIER RESTRICTION*',
                'E-TKT REQUIRED',
                '** PRIVATE FARES SELECTED **  ',
                '*PENALTY APPLIES*',
                'LAST DATE TO PURCHASE TICKET: 06OCT13',
                '$B-1 A02OCT13     ',
                'LOS EK X/DXB EK HOU 527.00USOWNG1/ITN2 NUC527.00END ROE1.0',
                'FARE USD 527.00 TAX 17.20US TAX 5.00XA TAX 7.00XY TAX 5.50YC',
                'TAX 35.70NG TAX 50.00QT TAX 20.00TE TAX 195.00YQ TOT USD 862.40',
                ' ',
                'S1 NVB06OCT/NVA06OCT',
                'S2 NVB07OCT/NVA07OCT',
                'E NON-END/SKYWARDS SAVER/',
                'E VALID ON EK ONLY',
                'TOUR CODE: ZZITN2ZZ       ',
                'TICKETING AGENCY 1O3K',
                'DEFAULT PLATING CARRIER EK',
                'US PFC: NOT APPLICABLE',
                'BAGGAGE ALLOWANCE',
                'ADT                                                         ',
                ' EK LOSHOU  2PC                                             ',
                '   BAG 1 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   BAG 2 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   MYTRIPANDMORE.COM/BAGGAGEDETAILSEK.BAGG',
                '                                                                ',
                'CARRY ON ALLOWANCE',
                ' EK LOSDXB  1PC                                             ',
                '   BAG 1 -  NO FEE       UPTO15LB/7KG AND UPTO45LI/115LCM ',
                ' EK DXBHOU  1PC                                             ',
                '   BAG 1 -  NO FEE       UPTO15LB/7KG AND UPTO45LI/115LCM ',
                'BAGGAGE DISCOUNTS MAY APPLY BASED ON FREQUENT FLYER STATUS/',
                'ONLINE CHECKIN/FORM OF PAYMENT/MILITARY/ETC.',
                '',
            ]),
            {
            },
        ]);

        // #6
        $list.push([
            php.implode(php.PHP_EOL, [
                '>$B/:N',
                '*FARE GUARANTEED AT TICKET ISSUANCE*',
                '',
                'E-TKT REQUIRED',
                '*PENALTY APPLIES*',
                'LAST DATE TO PURCHASE TICKET: 13OCT13',
                '$B-1 C10OCT13     ',
                'SFO AA X/LAX AA LON M240.50NKX3NAJB /-ROM AA X/CHI AA SFO',
                'M381.50NKWE3NA NUC622.00END ROE1.0',
                'FARE USD 622.00 TAX 7.50AY TAX 34.40US TAX 5.00XA TAX 13.50XF',
                'TAX 7.00XY TAX 5.50YC TAX 2.80EX TAX 10.20HB TAX 25.70IT TAX',
                '1.20MJ TAX 3.30VT TAX 516.00YR TOT USD 1254.10  ',
                'S1 NVB16APR/NVA16APR',
                'S2 NVB16APR/NVA16APR',
                'S3 NVB27APR/NVA27APR',
                'S4 NVB27APR/NVA27APR',
                'E NONREFUNDABLE',
                'E RESTRICTIONS APPLY',
                'E NON REF/RESTRICTIONS APPLY',
                'TICKETING AGENCY 2CV4',
                'DEFAULT PLATING CARRIER AA',
                'US PFC: XF SFO4.5 LAX4.5 ORD4.5 ',
                'BAGGAGE ALLOWANCE',
                'ADT                                                         ',
                ' AA SFOLON  1PC                                             ',
                '   BAG 1 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   BAG 2 -  100.00 USD   UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   MYTRIPANDMORE.COM/BAGGAGEDETAILSAA.BAGG',
                '                                                                ',
                ' AA ROMSFO  1PC                                             ',
                '   BAG 1 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   BAG 2 -  100.00 USD   UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   MYTRIPANDMORE.COM/BAGGAGEDETAILSAA.BAGG',
                '                                                                ',
                'CARRY ON ALLOWANCE',
                ' AA SFOLAX  2PC                                             ',
                '   BAG 1 -  NO FEE       UPTO45LI/115LCM                  ',
                '   BAG 2 -  NO FEE       CARRYON HAND BAGGAGE ALLOWANCE   ',
                ' AA LAXLON  2PC                                             ',
                '   BAG 1 -  NO FEE       UPTO45LI/115LCM                  ',
                '   BAG 2 -  NO FEE       CARRYON HAND BAGGAGE ALLOWANCE   ',
                ' AA ROMCHI  2PC                                             ',
                '   BAG 1 -  NO FEE       UPTO45LI/115LCM                  ',
                '   BAG 2 -  NO FEE       CARRYON HAND BAGGAGE ALLOWANCE   ',
                ' AA CHISFO  2PC                                             ',
                '   BAG 1 -  NO FEE       UPTO45LI/115LCM                  ',
                '   BAG 2 -  NO FEE       CARRYON HAND BAGGAGE ALLOWANCE   ',
                '                                                                ',
                'EMBARGO - FOR BAGGAGE LIMITATIONS SEE ',
                ' AA SFOLAX  MYTRIPANDMORE.COM/BAGGAGEDETAILSAA.BAGG         ',
                ' AA LAXLON  MYTRIPANDMORE.COM/BAGGAGEDETAILSAA.BAGG         ',
                ' AA ROMCHI  MYTRIPANDMORE.COM/BAGGAGEDETAILSAA.BAGG         ',
                ' AA CHISFO  MYTRIPANDMORE.COM/BAGGAGEDETAILSAA.BAGG         ',
                '                                                                ',
                'BAGGAGE DISCOUNTS MAY APPLY BASED ON FREQUENT FLYER STATUS/',
                'ONLINE CHECKIN/FORM OF PAYMENT/MILITARY/ETC.',
                '',
            ]),
            {
            },
        ]);

        // #7
        $list.push([
            php.implode(php.PHP_EOL, [
                '>$B-*2CV4/:G/ET',
                'E-TKT REQUIRED',
                '** PRIVATE FARES SELECTED **  ',
                '*PENALTY APPLIES*',
                'LAST DATE TO PURCHASE TICKET: 13OCT13',
                '$B-1 P10OCT13 - CAT35',
                'SFO AA X/LAX AA LON M221.50NKX3NAJB/SPLT8 /-ROM AA X/CHI AA SFO',
                'M351.00NKWE3NA/SPLT8 NUC572.50 -DISCOUNTED FARES SELECTED',
                '---END ROE1.0',
                'FARE USD 573.00 TAX 7.50AY TAX 34.40US TAX 5.00XA TAX 13.50XF',
                'TAX 7.00XY TAX 5.50YC TAX 2.80EX TAX 10.20HB TAX 25.70IT TAX',
                '1.20MJ TAX 3.30VT TAX 516.00YR TOT USD 1205.10  ',
                'S1 NVB16APR/NVA16APR',
                'S2 NVB16APR/NVA16APR',
                'S3 NVB27APR/NVA27APR',
                'S4 NVB27APR/NVA27APR',
                'E MARKUP CAP UP TO PUB FARE',
                'E PAYMENT/ CK VI CA AX DS',
                'TOUR CODE: ATL144         ',
                'TICKETING AGENCY 2CV4',
                'DEFAULT PLATING CARRIER AA',
                'US PFC: XF SFO4.5 LAX4.5 ORD4.5 ',
                'BAGGAGE ALLOWANCE',
                'ADT                                                         ',
                ' AA SFOLON  1PC                                             ',
                '   BAG 1 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   BAG 2 -  100.00 USD   UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   MYTRIPANDMORE.COM/BAGGAGEDETAILSAA.BAGG',
                '                                                                ',
                ' AA ROMSFO  1PC                                             ',
                '   BAG 1 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   BAG 2 -  100.00 USD   UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   MYTRIPANDMORE.COM/BAGGAGEDETAILSAA.BAGG',
                '                                                                ',
                'CARRY ON ALLOWANCE',
                ' AA SFOLAX  2PC                                             ',
                '   BAG 1 -  NO FEE       UPTO45LI/115LCM                  ',
                '   BAG 2 -  NO FEE       CARRYON HAND BAGGAGE ALLOWANCE   ',
                ' AA LAXLON  2PC                                             ',
                '   BAG 1 -  NO FEE       UPTO45LI/115LCM                  ',
                '   BAG 2 -  NO FEE       CARRYON HAND BAGGAGE ALLOWANCE   ',
                ' AA ROMCHI  2PC                                             ',
                '   BAG 1 -  NO FEE       UPTO45LI/115LCM                  ',
                '   BAG 2 -  NO FEE       CARRYON HAND BAGGAGE ALLOWANCE   ',
                ' AA CHISFO  2PC                                             ',
                '   BAG 1 -  NO FEE       UPTO45LI/115LCM                  ',
                '   BAG 2 -  NO FEE       CARRYON HAND BAGGAGE ALLOWANCE   ',
                '                                                                ',
                'EMBARGO - FOR BAGGAGE LIMITATIONS SEE ',
                ' AA SFOLAX  MYTRIPANDMORE.COM/BAGGAGEDETAILSAA.BAGG         ',
                ' AA LAXLON  MYTRIPANDMORE.COM/BAGGAGEDETAILSAA.BAGG         ',
                ' AA ROMCHI  MYTRIPANDMORE.COM/BAGGAGEDETAILSAA.BAGG         ',
                ' AA CHISFO  MYTRIPANDMORE.COM/BAGGAGEDETAILSAA.BAGG         ',
                '                                                                ',
                'BAGGAGE DISCOUNTS MAY APPLY BASED ON FREQUENT FLYER STATUS/',
                'ONLINE CHECKIN/FORM OF PAYMENT/MILITARY/ETC.',
                '',
            ]),
            {
            },
        ]);

        // #8 - with "FARE HAS FORM OF PAYMENT RESTRICTION" line
        $list.push([
            php.implode(php.PHP_EOL, [
                '>$B*IF37/-*115Q/:A/Z$37.00/ET/NOGR',
                '*FARE HAS A PLATING CARRIER RESTRICTION*',
                'E-TKT REQUIRED',
                '** PRIVATE FARES SELECTED **  ',
                '*PENALTY APPLIES*',
                'LAST DATE TO PURCHASE TICKET: 31AUG16',
                '$B-1 A29AUG16     ',
                'WAS DL X/MSP DL X/E/PAR DL YAO M100.75VK2OR5US/LN65 DL X/E/PAR',
                'DL X/ATL DL WAS M100.75VK2OR5US/LN65 PC37.00 NUC238.50END',
                'ROE1.0',
                'FARE USD 239.00 TAX 11.20AY TAX 35.60US TAX 3.96XA TAX 13.50XF',
                'TAX 7.00XY TAX 5.50YC TAX 18.40FR TAX 42.20QX TAX 17.20D7 TAX',
                '24.70VX TAX 37.00VY TAX 24.70VZ TAX 414.00YR TOT USD 893.96  ',
                'S1 NVB02SEP/NVA02SEP',
                'S2 NVB02SEP/NVA02SEP',
                'S3 NVB03SEP/NVA03SEP',
                'S4 NVB17SEP/NVA17SEP',
                'S5 NVB18SEP/NVA18SEP',
                'S6 NVB18SEP/NVA18SEP',
                'E NONEND/NONREF',
                'E L-9646/LN65',
                'FARE HAS FORM OF PAYMENT RESTRICTION',
                'TICKETING AGENCY 115Q',
                'DEFAULT PLATING CARRIER DL',
                'US PFC: XF DCA4.5 MSP4.5 ATL4.5 ',
                'BAGGAGE ALLOWANCE',
                'ADT                                                         ',
                ' DL WASYAO  2PC                                             ',
                '   BAG 1 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   BAG 2 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   MYTRIPANDMORE.COM/BAGGAGEDETAILSDL.BAGG',
                '                                                                ',
                ' DL YAOWAS  2PC                                             ',
                '   BAG 1 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   BAG 2 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   MYTRIPANDMORE.COM/BAGGAGEDETAILSDL.BAGG',
                '                                                                ',
                'CARRY ON ALLOWANCE',
                ' DL WASMSP  1PC                                             ',
                '   BAG 1 -  NO FEE       PERSONAL ITEM                    ',
                ' AF MSPPAR  1PC                                             ',
                '   BAG 1 -  NO FEE       UPTO26LB/12KG AND UPTO45LI/115LCM',
                ' AF PARYAO  1PC                                             ',
                '   BAG 1 -  NO FEE       UPTO26LB/12KG AND UPTO45LI/115LCM',
                ' AF YAOPAR  1PC                                             ',
                '   BAG 1 -  NO FEE       UPTO26LB/12KG AND UPTO45LI/115LCM',
                ' DL PARATL  1PC                                             ',
                '   BAG 1 -  NO FEE       PERSONAL ITEM                    ',
                ' DL ATLWAS  1PC                                             ',
                '   BAG 1 -  NO FEE       PERSONAL ITEM                    ',
                '                                                                ',
                'EMBARGO - FOR BAGGAGE LIMITATIONS SEE ',
                ' DL WASMSP  MYTRIPANDMORE.COM/BAGGAGEDETAILSDL.BAGG         ',
                ' DL PARATL  MYTRIPANDMORE.COM/BAGGAGEDETAILSDL.BAGG         ',
                ' DL ATLWAS  MYTRIPANDMORE.COM/BAGGAGEDETAILSDL.BAGG         ',
                '                                                                ',
                '** PRIVATE FARES SELECTED **  ',
                '*PENALTY APPLIES*',
                'LAST DATE TO PURCHASE TICKET: 31AUG16',
                '$B-2 A29AUG16     ',
                'WAS DL X/MSP DL X/E/PAR DL YAO M75.56VK2OR5USC/LN65 DL X/E/PAR',
                'DL X/ATL DL WAS M75.56VK2OR5USC/LN65 PC37.00 NUC188.12END',
                'ROE1.0',
                'FARE USD 188.00 TAX 11.20AY TAX 35.60US TAX 3.96XA TAX 13.50XF',
                'TAX 7.00XY TAX 5.50YC TAX 18.40FR TAX 42.20QX TAX 17.20D7 TAX',
                '24.70VX TAX 37.00VY TAX 24.70VZ TAX 414.00YR TOT USD 842.96  ',
                'S1 NVB02SEP/NVA02SEP',
                'S2 NVB02SEP/NVA02SEP',
                'S3 NVB03SEP/NVA03SEP',
                'S4 NVB17SEP/NVA17SEP',
                'S5 NVB18SEP/NVA18SEP',
                'S6 NVB18SEP/NVA18SEP',
                'E NONEND/NONREF',
                'E L-9646/LN65',
                'FARE HAS FORM OF PAYMENT RESTRICTION',
                'TICKETING AGENCY 115Q',
                'DEFAULT PLATING CARRIER DL',
                'US PFC: XF DCA4.5 MSP4.5 ATL4.5 ',
                'BAGGAGE ALLOWANCE',
                'CNN                                                         ',
                ' DL WASYAO  2PC                                             ',
                '   BAG 1 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   BAG 2 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   MYTRIPANDMORE.COM/BAGGAGEDETAILSDL.BAGG',
                '                                                                ',
                ' DL YAOWAS  2PC                                             ',
                '   BAG 1 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   BAG 2 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   MYTRIPANDMORE.COM/BAGGAGEDETAILSDL.BAGG',
                '                                                                ',
                'CARRY ON ALLOWANCE',
                ' DL WASMSP  1PC                                             ',
                '   BAG 1 -  NO FEE       PERSONAL ITEM                    ',
                ' AF MSPPAR  1PC                                             ',
                '   BAG 1 -  NO FEE       UPTO26LB/12KG AND UPTO45LI/115LCM',
                ' AF PARYAO  1PC                                             ',
                '   BAG 1 -  NO FEE       UPTO26LB/12KG AND UPTO45LI/115LCM',
                ' AF YAOPAR  1PC                                             ',
                '   BAG 1 -  NO FEE       UPTO26LB/12KG AND UPTO45LI/115LCM',
                ' DL PARATL  1PC                                             ',
                '   BAG 1 -  NO FEE       PERSONAL ITEM                    ',
                ' DL ATLWAS  1PC                                             ',
                '   BAG 1 -  NO FEE       PERSONAL ITEM                    ',
                '                                                                ',
                'EMBARGO - FOR BAGGAGE LIMITATIONS SEE ',
                ' DL WASMSP  MYTRIPANDMORE.COM/BAGGAGEDETAILSDL.BAGG         ',
                ' DL PARATL  MYTRIPANDMORE.COM/BAGGAGEDETAILSDL.BAGG         ',
                ' DL ATLWAS  MYTRIPANDMORE.COM/BAGGAGEDETAILSDL.BAGG         ',
                '                                                                ',
                'BAGGAGE DISCOUNTS MAY APPLY BASED ON FREQUENT FLYER STATUS/',
                'ONLINE CHECKIN/FORM OF PAYMENT/MILITARY/ETC.',
            ]),
            {
            },
        ]);

        // *SJ4ZB0 - parser fails currently due to "FARE HIGHER"
        $list.push([
            php.implode(php.PHP_EOL, [
                '>$B*IF82/-*15JE/:A/Z$82.00/ET/NOGR',
                '                         FARE HIGHER',
                '*FARE HAS A PLATING CARRIER RESTRICTION*',
                'E-TKT REQUIRED',
                '** PRIVATE FARES SELECTED **  ',
                '*PENALTY APPLIES*',
                'LAST DATE TO PURCHASE TICKET: 31OCT16',
                '$B-1-3 A28OCT16     ',
                'SFO DL X/SLC DL X/AMS DL AUH Q SFOAUH15.00M149.82VLOR9US/LN65',
                'KL X/AMS KL SFO Q AUHSFO15.00 149.83VLOR9US/LN65 PC82.00',
                'NUC411.65END ROE1.0',
                'FARE USD 412.00 TAX 5.60AY TAX 35.60US TAX 3.96XA TAX 9.00XF',
                'TAX 7.00XY TAX 5.50YC TAX 12.80CJ TAX 12.60RN TAX 20.40AE TAX',
                '9.50F6 TAX 1.40TP TAX 1.40ZR TAX 488.00YR TOT USD 1024.76  ',
                'S1 NVB12FEB/NVA12FEB',
                'S2 NVB12FEB/NVA12FEB',
                'S3 NVB13FEB/NVA13FEB',
                'S4 NVB22FEB/NVA22FEB',
                'S5 NVB22FEB/NVA22FEB',
                'E NONEND/NONREF',
                'E L-9646/LN65',
                'FARE HAS FORM OF PAYMENT RESTRICTION',
                'US PFC: XF SFO4.5 SLC4.5 ',
                'BAGGAGE ALLOWANCE',
                'ADT                                                         ',
                ' DL SFOAUH  2PC                                             ',
                '   BAG 1 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   BAG 2 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   MYTRIPANDMORE.COM/BAGGAGEDETAILSDL.BAGG',
                '                                                                ',
                ' DL AUHSFO  2PC                                             ',
                '   BAG 1 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   BAG 2 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   MYTRIPANDMORE.COM/BAGGAGEDETAILSDL.BAGG',
                '                                                                ',
                'CARRY ON ALLOWANCE',
                ' DL SFOSLC  1PC                                             ',
                '   BAG 1 -  NO FEE       PERSONAL ITEM                    ',
                ' DL SLCAMS  1PC                                             ',
                '   BAG 1 -  NO FEE       PERSONAL ITEM                    ',
                ' KL AMSAUH  1PC                                             ',
                '   BAG 1 -  NO FEE       UPTO26LB/12KG AND UPTO45LI/115LCM',
                ' KL AUHAMS  1PC                                             ',
                '   BAG 1 -  NO FEE       UPTO26LB/12KG AND UPTO45LI/115LCM',
                ' KL AMSSFO  1PC                                             ',
                '   BAG 1 -  NO FEE       UPTO26LB/12KG AND UPTO45LI/115LCM',
                '                                                                ',
                'EMBARGO - FOR BAGGAGE LIMITATIONS SEE ',
                ' DL SFOSLC  MYTRIPANDMORE.COM/BAGGAGEDETAILSDL.BAGG         ',
                ' DL SLCAMS  MYTRIPANDMORE.COM/BAGGAGEDETAILSDL.BAGG         ',
                '                                                                ',
                'BAGGAGE DISCOUNTS MAY APPLY BASED ON FREQUENT FLYER STATUS/',
                'ONLINE CHECKIN/FORM OF PAYMENT/MILITARY/ETC.',
            ]),
            {
                'pricingCommandCopy': '>$B*IF82/-*15JE/:A/Z$82.00/ET/NOGR',
                'wholePricingMarkers': {'fareHasPlatingCarrierRestriction': true},
            },
        ]);

        // *L98G16 - pricing command is wrapped because it is too large
        $list.push([
            php.implode(php.PHP_EOL, [
                '>$B-*1O3K/:A/ITLOS16001/Z0/GB|EBNON@END|EBVALID@ON@ET@AND@INTERL',
                'INE/F|OK/ET',
                'E-TKT REQUIRED',
                '** PRIVATE FARES SELECTED **  ',
                'LAST DATE TO PURCHASE TICKET: 10DEC16',
                '$B-1 P28OCT16 - CAT35',
                'WAS ET X/ADD ET LOS 150.00TLOWUS1 NUC150.00END ROE1.0',
                'FARE USD 150.00 TAX 5.60AY TAX 17.80US TAX 4.50XF TAX 8.62YQ',
                'TAX 262.00YR TOT USD 448.52 ',
                'TOUR CODE: XXX16001       ',
                'TICKETING AGENCY 1O3K',
                'DEFAULT PLATING CARRIER ET',
                'US PFC: XF IAD4.5 ',
                'BAGGAGE ALLOWANCE',
                'ADT                                                         ',
                ' ET WASLOS  2PC                                             ',
                '   BAG 1 -  NO FEE       UPTO50LB/23KG                    ',
                '   BAG 2 -  NO FEE       UPTO50LB/23KG                    ',
                '   MYTRIPANDMORE.COM/BAGGAGEDETAILSET.BAGG',
                '                                                                ',
                'CARRY ON ALLOWANCE',
                ' ET WASADD  1PC                                             ',
                '   BAG 1 -  NO FEE       CARRYON HAND BAGGAGE ALLOWANCE   ',
                ' ET ADDLOS  1PC                                             ',
                '   BAG 1 -  NO FEE       CARRYON HAND BAGGAGE ALLOWANCE   ',
                'BAGGAGE DISCOUNTS MAY APPLY BASED ON FREQUENT FLYER STATUS/',
                'ONLINE CHECKIN/FORM OF PAYMENT/MILITARY/ETC.',
            ]),
            {
                'pricingCommandCopy': '>$B-*1O3K/:A/ITLOS16001/Z0/GB|EBNON@END|EBVALID@ON@ET@AND@INTERLINE/F|OK/ET',
                'wholePricingMarkers': {'eTicketRequired': true},
            },
        ]);

        // *V7PQQ4 - with "BEST FARE FOR PSGR TYPE"
        $list.push([
            php.implode(php.PHP_EOL, [
                '>$BN1*JCB|2*JCB|3*J04|4*JNF/-*1O3K/:A/ITIND16001/Z0/GEBNON@END|E',
                'BVALID@ON@ET@ONLY|EBAND@INTERLINE|B/ET',
                'E-TKT REQUIRED',
                '** PRIVATE FARES SELECTED **  ',
                'BEST FARE FOR PSGR TYPE',
                'LAST DATE TO PURCHASE TICKET: 08DEC16',
                '$B-1-2 P28NOV16 - CAT35',
                'IND UA X/WAS ET X/ADD ET LOS 340.00VLUS1 NUC340.00END ROE1.0',
                'FARE USD 340.00 TAX 5.60AY TAX 17.80US TAX 9.00XF TAX 8.62YQ',
                'TAX 262.00YR TOT USD 643.02 ',
                'TOUR CODE: XXX16001       ',
                'TICKETING AGENCY 1O3K',
                'DEFAULT PLATING CARRIER ET',
                'US PFC: XF IND4.5 IAD4.5 ',
                'BAGGAGE ALLOWANCE',
                'JCB                                                         ',
                ' UA INDLOS  2PC                                             ',
                '   BAG 1 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   BAG 2 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   MYTRIPANDMORE.COM/BAGGAGEDETAILSUA.BAGG',
                '                                                                ',
                'CARRY ON ALLOWANCE',
                ' UA INDWAS  CARRY ON ALLOWANCE DATA NOT AVAILABLE           ',
                ' ET WASADD  1PC                                             ',
                '   BAG 1 -  NO FEE       CARRYON HAND BAGGAGE ALLOWANCE   ',
                ' ET ADDLOS  1PC                                             ',
                '   BAG 1 -  NO FEE       CARRYON HAND BAGGAGE ALLOWANCE   ',
                '** PRIVATE FARES SELECTED **  ',
                'BEST FARE FOR PSGR TYPE',
                'LAST DATE TO PURCHASE TICKET: 08DEC16',
                '$B-3 P28NOV16 - CAT35',
                'IND UA X/WAS ET X/ADD ET LOS 340.00VLUS1 NUC340.00END ROE1.0',
                'FARE USD 340.00 TAX 5.60AY TAX 17.80US TAX 9.00XF TAX 8.62YQ',
                'TAX 262.00YR TOT USD 643.02 ',
                'TOUR CODE: XXX16001       ',
                'TICKETING AGENCY 1O3K',
                'DEFAULT PLATING CARRIER ET',
                'US PFC: XF IND4.5 IAD4.5 ',
                'BAGGAGE ALLOWANCE',
                'JNN                                                         ',
                ' UA INDLOS  2PC                                             ',
                '   BAG 1 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   BAG 2 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   MYTRIPANDMORE.COM/BAGGAGEDETAILSUA.BAGG',
                '                                                                ',
                'CARRY ON ALLOWANCE',
                ' UA INDWAS  CARRY ON ALLOWANCE DATA NOT AVAILABLE           ',
                ' ET WASADD  1PC                                             ',
                ' ET ADDLOS  1PC                                             ',
                '   BAG 1 -  NO FEE       CARRYON HAND BAGGAGE ALLOWANCE   ',
                '** PRIVATE FARES SELECTED **  ',
                'BEST FARE FOR PSGR TYPE',
                'LAST DATE TO PURCHASE TICKET: 08DEC16',
                '$B-4 P28NOV16 - CAT35',
                'IND UA X/WAS ET X/ADD ET LOS 340.00VLUS1 NUC340.00END ROE1.0',
                'FARE USD 340.00 TAX 5.60AY TAX 17.80US TAX 9.00XF TAX 8.62YQ',
                'TOT USD 381.02 ',
                'TOUR CODE: XXX16001       ',
                'TICKETING AGENCY 1O3K',
                'DEFAULT PLATING CARRIER ET',
                'US PFC: XF IND4.5 IAD4.5 ',
                'BAGGAGE ALLOWANCE',
                'JNF                                                         ',
                ' UA INDLOS  1PC                                             ',
                '   BAG 1 -  BAGGAGE CHARGES DATA NOT AVAILABLE            ',
                '   BAG 2 -  200.00 USD   UPTO50LB/23KG AND OVER62LI/158LCM',
                '   MYTRIPANDMORE.COM/BAGGAGEDETAILSUA.BAGG',
                '                                                                ',
                'CARRY ON ALLOWANCE',
                ' UA INDWAS  CARRY ON ALLOWANCE DATA NOT AVAILABLE           ',
                ' ET WASADD  1PC                                             ',
                '   BAG 1 -  NO FEE       CARRYON HAND BAGGAGE ALLOWANCE   ',
                ' ET ADDLOS  1PC                                             ',
                '   BAG 1 -  NO FEE       CARRYON HAND BAGGAGE ALLOWANCE   ',
                'BAGGAGE DISCOUNTS MAY APPLY BASED ON FREQUENT FLYER STATUS/',
                'ONLINE CHECKIN/FORM OF PAYMENT/MILITARY/ETC.',
                '',
            ]),
            {
                'pricingBlockList': [
                    {'privateFaresSelected': true,'lastDateToPurchaseTicket': {'parsed': '2016-12-08'}},
                    {'privateFaresSelected': true,'lastDateToPurchaseTicket': {'parsed': '2016-12-08'}},
                    {'privateFaresSelected': true,'lastDateToPurchaseTicket': {'parsed': '2016-12-08'}},
                ],
            },
        ]);

        // >*NJK2GI - with "---NET PRICE MUST BE PRIVATE---" comment in fare construction
        $list.push([
            php.implode(php.PHP_EOL, [
                '>$B-*2CV4/ET',
                'E-TKT REQUIRED',
                '** PRIVATE FARES SELECTED **  ',
                '*PENALTY APPLIES*',
                'LAST DATE TO PURCHASE TICKET: 28NOV16',
                '$B-1 P28NOV16 - CAT35',
                'WAS UA X/BRU Q40.00 UA EBB 1.90KLLNC5N/HHPRUSD UA X/BRU UA WAS',
                'Q80.00 1.90KLLNC5N/HHPRUSD NUC123.80 ---NET PRICE MUST BE PRIVA',
                'TE---END ROE1.0',
                'FARE USD 124.00 TAX 5.60AY TAX 35.60US TAX 3.96XA TAX 4.50XF',
                'TAX 7.00XY TAX 5.50YC TAX 37.60BE TAX 10.00UG TAX 47.20UL TAX',
                '414.00YQ TOT USD 694.96  ',
                'S1 NVB07DEC/NVA07DEC',
                'S2 NVB08DEC/NVA08DEC',
                'S3 NVB12JAN/NVA12JAN',
                'S4 NVB13JAN/NVA13JAN',
                'TOUR CODE: 294UA          ',
                'TICKETING AGENCY 2CV4',
                'DEFAULT PLATING CARRIER UA',
                'US PFC: XF IAD4.5 ',
                'BAGGAGE ALLOWANCE',
                'ADT                                                         ',
                ' UA WASEBB  2PC                                             ',
                '   BAG 1 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   BAG 2 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   MYTRIPANDMORE.COM/BAGGAGEDETAILSUA.BAGG',
                '                                                                ',
                ' UA EBBWAS  2PC                                             ',
                '   BAG 1 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   BAG 2 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   MYTRIPANDMORE.COM/BAGGAGEDETAILSUA.BAGG',
                '                                                                ',
                'CARRY ON ALLOWANCE',
                ' UA WASBRU  CARRY ON ALLOWANCE DATA NOT AVAILABLE           ',
                ' SN BRUEBB  1PC                                             ',
                '   BAG 1 -  NO FEE       UPTO26LB/12KG AND UPTO46LI/118LCM',
                ' SN EBBBRU  1PC                                             ',
                '   BAG 1 -  NO FEE       UPTO26LB/12KG AND UPTO46LI/118LCM',
                ' UA BRUWAS  CARRY ON ALLOWANCE DATA NOT AVAILABLE           ',
                '',
            ]),
            {
                'pricingBlockList': [
                    {
                        'fareConstruction': {
                            'segments': [{'destination': 'BRU','fuelSurcharge': '40.00'}],
                            'fareAndMarkupInNuc': '123.80',
                            'infoMessage': php.implode(php.PHP_EOL, ['NET PRICE MUST BE PRIVA','TE']),
                            'rateOfExchange': '1.0',
                        },
                    },
                ],
            },
        ]);

        // >*PMZWPY - "---NET PRICE MUST BE PRIVA TE" without closing "---"
        $list.push([
            php.implode(php.PHP_EOL, [
                '>$B-*1O3K/ET',
                '*FARE HAS A PLATING CARRIER RESTRICTION*',
                'E-TKT REQUIRED',
                '** PRIVATE FARES SELECTED **  ',
                '*PENALTY APPLIES*',
                'LAST DATE TO PURCHASE TICKET: 14DEC16',
                '$B-1 P28NOV16 - CAT35',
                'MEM AA X/PHL QR X/DOH QR SOF 271.52NLR5R1RI/SPLT8USD10',
                'NUC271.52 ---NET PRICE MUST BE PRIVA TEEND ROE1.0 ZP MEM',
                'FARE USD 272.00 TAX 11.20AY TAX 25.00US TAX 4.50XF TAX 9.60G4',
                'TAX 0.50PZ TAX 4.00ZP TAX 135.00YQ TAX 4.00YR TOT USD 465.80 ',
                'S1 NVB14DEC/NVA14DEC',
                'S2 NVB15DEC/NVA15DEC',
                'S3 NVB16DEC/NVA16DEC',
                'TOUR CODE: QRDROP         ',
                'TICKETING AGENCY 1O3K',
                'DEFAULT PLATING CARRIER QR',
                'US PFC: XF PHL4.5 ',
                'BAGGAGE ALLOWANCE',
                'ADT                                                         ',
                ' AA MEMSOF  1PC                                             ',
                '   BAG 1 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   BAG 2 -  100.00 USD   UPTO70LB/32KG AND UPTO62LI/158LCM',
                '   MYTRIPANDMORE.COM/BAGGAGEDETAILSAA.BAGG',
                '                                                                ',
                'CARRY ON ALLOWANCE',
                ' AA MEMPHL  2PC                                             ',
                '   BAG 1 -  NO FEE       UPTO45LI/115LCM                  ',
                '   BAG 2 -  NO FEE       CARRYON HAND BAGGAGE ALLOWANCE   ',
                ' QR PHLDOH  CARRY ON ALLOWANCE DATA NOT AVAILABLE           ',
                ' QR DOHSOF  CARRY ON ALLOWANCE DATA NOT AVAILABLE           ',
                '                                                                ',
                'EMBARGO - FOR BAGGAGE LIMITATIONS SEE ',
                ' AA MEMPHL  MYTRIPANDMORE.COM/BAGGAGEDETAILSAA.BAGG         ',
                '                                                                ',
            ]),
            {
                'pricingBlockList': [
                    {
                        'fareConstruction': {
                            'fareAndMarkupInNuc': '271.52',
                            'infoMessage': 'NET PRICE MUST BE PRIVA TE',
                            'rateOfExchange': '1.0',
                        },
                    },
                ],
            },
        ]);

        // >*PZX35I - "---NET PRICE MUST BE PRIVA TE---" is it free form text?
        $list.push([
            php.implode(php.PHP_EOL, [
                '>$B-*2CV4/ET',
                '*FARE HAS A PLATING CARRIER RESTRICTION*',
                'E-TKT REQUIRED',
                '** PRIVATE FARES SELECTED **  ',
                '*PENALTY APPLIES*',
                'LAST DATE TO PURCHASE TICKET: 30NOV16',
                '$B-1 P28NOV16 - CAT35',
                'OMA UA X/CHI UA X/BRU Q20.00 SN LFW 546.50SH06RCE/HHPRUSD SN',
                'X/BRU UA X/EWR Q40.00 UA OMA 626.00WH06RCE/HHPRUSD NUC1232.50',
                '---NET PRICE MUST BE PRIVA TE---END ROE1.0',
                'FARE USD 1233.00 TAX 11.20AY TAX 35.60US TAX 3.96XA TAX 9.00XF',
                'TAX 7.00XY TAX 5.50YC TAX 37.60BE TAX 20.90SM TAX 16.10VO TAX',
                '4.80YG TAX 8.00YH TAX 16.10ZT TAX 650.00YQ TOT USD 2058.76  ',
                'S1 NVB18DEC/NVA18DEC',
                'S2 NVB18DEC/NVA18DEC',
                'S3 NVB19DEC/NVA19DEC',
                'S4 NVB09JAN/NVA09JAN',
                'S5 NVB10JAN/NVA10JAN',
                'S6 NVB10JAN/NVA10JAN',
                'TOUR CODE: 294UA          ',
                'TICKETING AGENCY 2CV4',
                'DEFAULT PLATING CARRIER UA',
                'US PFC: XF ORD4.5 EWR4.5 ',
                'BAGGAGE ALLOWANCE',
                'ADT                                                         ',
                ' UA OMALFW  2PC                                             ',
                '   BAG 1 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   BAG 2 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   MYTRIPANDMORE.COM/BAGGAGEDETAILSUA.BAGG',
                '                                                                ',
                ' UA LFWOMA  2PC                                             ',
                '   BAG 1 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   BAG 2 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   MYTRIPANDMORE.COM/BAGGAGEDETAILSUA.BAGG',
                '                                                                ',
                'CARRY ON ALLOWANCE',
                ' UA OMACHI  CARRY ON ALLOWANCE DATA NOT AVAILABLE           ',
                ' UA CHIBRU  CARRY ON ALLOWANCE DATA NOT AVAILABLE           ',
                ' SN BRULFW  1PC                                             ',
                '   BAG 1 -  NO FEE       UPTO26LB/12KG AND UPTO46LI/118LCM',
                ' SN LFWBRU  1PC                                             ',
                '   BAG 1 -  NO FEE       UPTO26LB/12KG AND UPTO46LI/118LCM',
                ' UA BRUNYC  CARRY ON ALLOWANCE DATA NOT AVAILABLE           ',
                ' UA EWROMA  CARRY ON ALLOWANCE DATA NOT AVAILABLE           ',
                '',
            ]),
            {
                'pricingBlockList': [
                    {
                        'fareConstruction': {
                            'fareAndMarkupInNuc': '1232.50',
                            'infoMessage': 'NET PRICE MUST BE PRIVA TE',
                            'rateOfExchange': '1.0',
                        },
                    },
                ],
            },
        ]);

        // >*MTBSKT; with "THE FOLLOWING RULES FAILED FOR JRT7"
        // probably should just ignore unknown lines in this section
        $list.push([
            php.implode(php.PHP_EOL, [
                '>$B-*1O3K@JRT7/ET',
                '          **AGENT SELECTED FARE USED**',
                '',
                'E-TKT REQUIRED',
                'LAST DATE TO PURCHASE TICKET: 02APR17',
                '$B-1-7 M23JAN17     ',
                'HKG CX OSA Q5.80 1618.57JRT7 CX HKG 1618.57JRT7 NUC3242.94END',
                'ROE7.75684',
                'FARE HKD 25160  EQU USD 3244.00 TAX 20.60G3 TAX 15.50HK TAX',
                '2.70OI TAX 23.80SW TOT USD 3306.60 ',
                'E T1',
                'TICKETING AGENCY 1O3K',
                'DEFAULT PLATING CARRIER CX',
                '         THE FOLLOWING RULES FAILED FOR JRT7    ',
                '              BOOKING CLASS',
                '         THE FOLLOWING RULES FAILED FOR JRT7    ',
                '              BOOKING CLASS',
                'RATE USED IN EQU TOTAL IS BSR 1HKD - 0.12892USD',
                'BAGGAGE ALLOWANCE',
                'ADT                                                         ',
                ' CX HKGOSA  40K                                             ',
                '   BAG 1 -  CHGS MAY APPLY IF BAGS EXCEED TTL WT ALLOWANCE',
                '   BAG 2 -  CHGS MAY APPLY IF BAGS EXCEED TTL WT ALLOWANCE',
                '   MYTRIPANDMORE.COM/BAGGAGEDETAILSCX.BAGG',
                '                                                                ',
                ' CX OSAHKG  40K                                             ',
                '   BAG 1 -  CHGS MAY APPLY IF BAGS EXCEED TTL WT ALLOWANCE',
                '   BAG 2 -  CHGS MAY APPLY IF BAGS EXCEED TTL WT ALLOWANCE',
                '   MYTRIPANDMORE.COM/BAGGAGEDETAILSCX.BAGG',
                '                                                                ',
                'CARRY ON ALLOWANCE',
                ' CX HKGOSA  1PC                                             ',
                '   BAG 1 -  NO FEE       UPTO22LB/10KG AND UPTO45LI/115LCM',
                ' CX OSAHKG  1PC                                             ',
                '   BAG 1 -  NO FEE       UPTO22LB/10KG AND UPTO45LI/115LCM',
                'BAGGAGE DISCOUNTS MAY APPLY BASED ON FREQUENT FLYER STATUS/',
                'ONLINE CHECKIN/FORM OF PAYMENT/MILITARY/ETC.',
                '',
            ]),
            {
                'pricingBlockList': [
                    {
                        'defaultPlatingCarrier': 'CX',
                        'unparsedInfoLines': [
                            '         THE FOLLOWING RULES FAILED FOR JRT7    ',
                            '              BOOKING CLASS',
                            '         THE FOLLOWING RULES FAILED FOR JRT7    ',
                            '              BOOKING CLASS',
                        ],
                        'baggageInfo': {
                            'parsed': {
                                'baggageAllowanceBlocks': [
                                    {
                                        'paxTypeCode': 'ADT',
                                        'segments': [{'segmentDetails': {'departureAirport': 'HKG','destinationAirport': 'OSA'}}],
                                    },
                                ],
                            },
                        },
                    },
                ],
            },
        ]);

        // >*V1VSDQ; fare with airports - WASADD304.50
        $list.push([
            php.implode(php.PHP_EOL, [
                '>$B/:N',
                '*FARE GUARANTEED AT TICKET ISSUANCE*',
                'E-TKT REQUIRED',
                '*PENALTY APPLIES*',
                'LAST DATE TO PURCHASE TICKET: 22APR17',
                '$B-1 C29MAR17     ',
                'WAS ET ADD(ET EBB Q4.00 44.50TPRET ET ADD Q4.00 44.50TPRET)ET',
                'BLZ Q WASBLZ50.00WASADD304.50HLESUS ET X/ADD ET WAS',
                '279.50HLESUS NUC731.00END ROE1.0',
                'FARE USD 731.00 TAX 5.60AY TAX 36.00US TAX 3.96XA TAX 4.50XF',
                'TAX 7.00XY TAX 5.50YC TAX 10.00UG TAX 47.20UL TAX 30.00LD TAX',
                '5.00YZ TAX 8.62YQ TAX 678.00YR TOT USD 1572.38  ',
                'S1 NVB22APR/NVA22APR',
                'S2 NVB23APR/NVA23APR',
                'S3 NVB30APR/NVA30APR',
                'S4 NVB30APR/NVA30APR',
                'S5 NVB05MAY/NVA05MAY',
                'S6 NVB05MAY/NVA05MAY',
                'E NON-ENDO/PENALTIES APPLY',
                'TICKETING AGENCY 2CV4',
                'DEFAULT PLATING CARRIER ET',
                'US PFC: XF IAD4.5 ',
                'BAGGAGE ALLOWANCE',
                'ADT                                                         ',
                ' ET WASEBB  2PC                                             ',
                '   BAG 1 -  NO FEE       UPTO50LB/23KG                    ',
                '   BAG 2 -  NO FEE       UPTO50LB/23KG                    ',
                '   MYTRIPANDMORE.COM/BAGGAGEDETAILSET.BAGG',
                '                                                                 ET EBBBLZ  2PC                                             ',
                '   BAG 1 -  NO FEE       UPTO50LB/23KG                    ',
                '   BAG 2 -  NO FEE       UPTO50LB/23KG                    ',
                '   MYTRIPANDMORE.COM/BAGGAGEDETAILSET.BAGG',
                '                                                                 ET BLZWAS  2PC                                             ',
                '   BAG 1 -  NO FEE       UPTO50LB/23KG                    ',
                '   BAG 2 -  NO FEE       UPTO50LB/23KG                    ',
                '   MYTRIPANDMORE.COM/BAGGAGEDETAILSET.BAGG',
                '                                                                CARRY ON ALLOWANCE',
                ' ET WASADD  1PC                                             ',
                '   BAG 1 -  NO FEE       CARRYON HAND BAGGAGE ALLOWANCE   ',
                ' ET ADDEBB  1PC                                             ',
                '   BAG 1 -  NO FEE       CARRYON HAND BAGGAGE ALLOWANCE   ',
                ' ET EBBADD  1PC                                             ',
                '   BAG 1 -  NO FEE       CARRYON HAND BAGGAGE ALLOWANCE   ',
                ' ET ADDBLZ  1PC                                             ',
                '   BAG 1 -  NO FEE       CARRYON HAND BAGGAGE ALLOWANCE   ',
                ' ET BLZADD  1PC                                             ',
                '   BAG 1 -  NO FEE       CARRYON HAND BAGGAGE ALLOWANCE   ',
                ' ET ADDWAS  1PC                                             ',
                '   BAG 1 -  NO FEE       CARRYON HAND BAGGAGE ALLOWANCE   ',
                'BAGGAGE DISCOUNTS MAY APPLY BASED ON FREQUENT FLYER STATUS/',
                'ONLINE CHECKIN/FORM OF PAYMENT/MILITARY/ETC.',
            ]),
            {
                'parsedPricingCommand': {
                    'isManualPricingRecord': false,
                    'pricingModifiers': [{'raw': ':N','type': 'fareType','parsed': 'public'}],
                },
                'pricingBlockList': [
                    {
                        'passengerNumbers': [1],
                        'fareConstruction': {
                            'segments': [
                                {'destination': 'ADD'},
                                {'destination': 'EBB', 'fuelSurchargeParts': ['4.00'], 'fare': '44.50', 'fareBasis': 'TPRET'},
                                {'destination': 'ADD', 'fuelSurchargeParts': ['4.00'], 'fare': '44.50', 'fareBasis': 'TPRET'},
                                {'destination': 'BLZ', 'fare': '304.50', 'fareBasis': 'HLESUS'},
                                {'destination': 'ADD'},
                                {'destination': 'WAS', 'fare': '279.50', 'fareBasis': 'HLESUS'},
                            ],
                            'currency': 'NUC',
                            'rateOfExchange': '1.0',
                            'fareAndMarkup': {'currency': 'USD','amount': '731.00'},
                            'taxes': [
                                {'amount': '5.60','pseudoCountryCode': 'AY'},
                                {'amount': '36.00','pseudoCountryCode': 'US'},
                                {'amount': '3.96','pseudoCountryCode': 'XA'},
                                {'amount': '4.50','pseudoCountryCode': 'XF'},
                                {'amount': '7.00','pseudoCountryCode': 'XY'},
                                {'amount': '5.50','pseudoCountryCode': 'YC'},
                                {'amount': '10.00','pseudoCountryCode': 'UG'},
                                {'amount': '47.20','pseudoCountryCode': 'UL'},
                                {'amount': '30.00','pseudoCountryCode': 'LD'},
                                {'amount': '5.00','pseudoCountryCode': 'YZ'},
                                {'amount': '8.62','pseudoCountryCode': 'YQ'},
                                {'amount': '678.00','pseudoCountryCode': 'YR'},
                            ],
                            'amountCharged': {'currency': 'USD','amount': '1572.38'},
                        },
                        'notValidBA': [
                            {'number': '1', 'notValidBefore': '22APR', 'notValidAfter': '22APR'},
                            {'number': '2', 'notValidBefore': '23APR', 'notValidAfter': '23APR'},
                            {'number': '3', 'notValidBefore': '30APR', 'notValidAfter': '30APR'},
                            {'number': '4', 'notValidBefore': '30APR', 'notValidAfter': '30APR'},
                            {'number': '5', 'notValidBefore': '05MAY', 'notValidAfter': '05MAY'},
                            {'number': '6', 'notValidBefore': '05MAY', 'notValidAfter': '05MAY'},
                        ],
                        'endorsementBoxLine': ['NON-ENDO/PENALTIES APPLY'],
                        // ...
                    },
                ],
            },
        ]);

        // >*PMW5XY; with "PAPER TICKET REQUIRED"
        $list.push([
            php.implode(php.PHP_EOL, [
                '>$B/:N',
                '*FARE GUARANTEED AT TICKET ISSUANCE*',
                'PAPER TICKET REQUIRED',
                '*PENALTY APPLIES*',
                'LAST DATE TO PURCHASE TICKET: 12APR17',
                '$B-1-2 C12APR17     ',
                'PQI KS BOS 96.74L21NR USD96.74END ZP PQI0',
                'FARE USD 96.74 TAX 7.26US TAX 4.50XF TOT USD 108.50',
                'S1 NVB13DEC/NVA13DEC',
                'E VALID KS ONLY',
                'E NONREF/FEE FOR CHG',
                'TICKETING AGENCY 1O3K',
                'DEFAULT PLATING CARRIER KS',
                'US PFC: XF PQI4.5 ',
                'BAGGAGE ALLOWANCE',
                'ADT                                                         ',
                ' KS PQIBOS  0PC                                             ',
                '   BAG 1 -  25.00 USD    UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   BAG 2 -  25.00 USD    UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   MYTRIPANDMORE.COM/BAGGAGEDETAILSKS.BAGG',
                '                                                                ',
                'CARRY ON ALLOWANCE',
                ' KS PQIBOS  1PC                                             ',
                '   BAG 1 -  NO FEE       CARRY ON HAND BAGGAGE            ',
                '   BAG 2 -  0.0 USD      CARRY ON HAND BAGGAGE            ',
                '   BAG 3 -  0.0 USD      CARRY ON HAND BAGGAGE            ',
                'BAGGAGE DISCOUNTS MAY APPLY BASED ON FREQUENT FLYER STATUS/',
                'ONLINE CHECKIN/FORM OF PAYMENT/MILITARY/ETC.',
            ]),
            {
                'wholePricingMarkers': {
                    'paperTicketRequired': true,
                },
                'parsedPricingCommand': {
                    'isManualPricingRecord': false,
                    'pricingModifiers': [{'raw': ':N','type': 'fareType','parsed': 'public'}],
                },
                'pricingBlockList': [
                    {
                        'passengerNumbers': [1, 2],
                        'fareConstruction': {
                            'segments': [
                                {'destination': 'BOS', 'fare': '96.74', 'fareBasis': 'L21NR'},
                            ],
                            'currency': 'USD',
                            'fareAndMarkupInNuc': '96.74',
                            'taxes': [
                                {'pseudoCountryCode': 'US','amount': '7.26'},
                                {'pseudoCountryCode': 'XF','amount': '4.50'},
                            ],
                            'amountCharged': {'currency': 'USD','amount': '108.50'},
                        },
                        'endorsementBoxLine': ['VALID KS ONLY', 'NONREF/FEE FOR CHG'],
                        // ...
                    },
                ],
            },
        ]);

        // >*M2D4MS; failed on "CARRIER MAY OFFER..." after baggage block
        $list.push([
            php.implode(php.PHP_EOL, [
                '>$BN1-1|2-1|3-1/:N',
                '*FARE GUARANTEED AT TICKET ISSUANCE*',
                '',
                '*FARE HAS A PLATING CARRIER RESTRICTION*',
                'E-TKT REQUIRED',
                '        **CARRIER MAY OFFER ADDITIONAL SERVICES**SEE >$B/DASO;',
                '*PENALTY APPLIES*',
                'LAST DATE TO PURCHASE TICKET: 22JUL17',
                '$B-1-2 C22MAY17     ',
                'SAT UA X/LAX OZ SEL OZ MNL 560.00QKXUS OZ X/SEL OZ X/LAX UA SAT',
                '505.00KKXUS NUC1065.00END ROE1.0',
                'FARE USD 1065.00 TAX 11.20AY TAX 36.00US TAX 3.96XA TAX 13.50XF',
                'TAX 7.00XY TAX 5.50YC TAX 33.80BP TAX 11.00LI TAX 123.60YQ TOT',
                'USD 1310.56  ',
                'E NO SHOW US100/NO END/NO UG',
                'TICKETING AGENCY 1O3K',
                'DEFAULT PLATING CARRIER OZ',
                'US PFC: XF SAT4.5 LAX4.5 LAX4.5 ',
                'BAGGAGE ALLOWANCE',
                'ADT                                                         ',
                ' UA SATSEL  2PC                                             ',
                '   BAG 1 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   BAG 2 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   MYTRIPANDMORE.COM/BAGGAGEDETAILSUA.BAGG',
                '                                                                ',
                ' UA SELMNL  2PC                                             ',
                '   BAG 1 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   BAG 2 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   MYTRIPANDMORE.COM/BAGGAGEDETAILSUA.BAGG',
                '                                                                ',
                ' UA MNLSAT  2PC                                             ',
                '   BAG 1 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   BAG 2 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   MYTRIPANDMORE.COM/BAGGAGEDETAILSUA.BAGG',
                '                                                                ',
                'CARRY ON ALLOWANCE',
                ' UA SATLAX  1PC                                             ',
                '   BAG 1 -  NO FEE       CARRYON HAND BAGGAGE ALLOWANCE   ',
                ' OZ LAXSEL  1PC                                             ',
                '   BAG 1 -  NO FEE       CARRYON HAND BAGGAGE ALLOWANCE   ',
                ' OZ SELMNL  1PC                                             ',
                '   BAG 1 -  NO FEE       CARRYON HAND BAGGAGE ALLOWANCE   ',
                ' OZ MNLSEL  1PC                                             ',
                '   BAG 1 -  NO FEE       CARRYON HAND BAGGAGE ALLOWANCE   ',
                ' OZ SELLAX  1PC                                             ',
                '   BAG 1 -  NO FEE       CARRYON HAND BAGGAGE ALLOWANCE   ',
                ' UA LAXSAT  1PC                                             ',
                '   BAG 1 -  NO FEE       CARRYON HAND BAGGAGE ALLOWANCE   ',
                '        **CARRIER MAY OFFER ADDITIONAL SERVICES**SEE >$B/DASO;',
                '*PENALTY APPLIES*',
                'LAST DATE TO PURCHASE TICKET: 22JUL17',
                '$B-3 C22MAY17     ',
                'SAT UA X/LAX OZ SEL OZ MNL 420.00QKXUS/CH25 OZ X/SEL OZ X/LAX',
                'UA SAT 378.75KKXUS/CH25 NUC798.75END ROE1.0',
                'FARE USD 799.00 TAX 11.20AY TAX 36.00US TAX 3.96XA TAX 13.50XF',
                'TAX 7.00XY TAX 5.50YC TAX 33.80BP TAX 11.00LI TAX 123.60YQ TOT',
                'USD 1044.56  ',
                'E NO SHOW US100/NO END/NO UG',
                'TICKETING AGENCY 1O3K',
                'DEFAULT PLATING CARRIER OZ',
                'US PFC: XF SAT4.5 LAX4.5 LAX4.5 ',
                'BAGGAGE ALLOWANCE',
                'CNN                                                         ',
                ' UA SATSEL  2PC                                             ',
                '   BAG 1 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   BAG 2 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   MYTRIPANDMORE.COM/BAGGAGEDETAILSUA.BAGG',
                '                                                                ',
                ' UA SELMNL  2PC                                             ',
                '   BAG 1 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   BAG 2 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   MYTRIPANDMORE.COM/BAGGAGEDETAILSUA.BAGG',
                '                                                                ',
                ' UA MNLSAT  2PC                                             ',
                '   BAG 1 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   BAG 2 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   MYTRIPANDMORE.COM/BAGGAGEDETAILSUA.BAGG',
                '                                                                ',
                'CARRY ON ALLOWANCE',
                ' UA SATLAX  1PC                                             ',
                '   BAG 1 -  NO FEE       CARRYON HAND BAGGAGE ALLOWANCE   ',
                ' OZ LAXSEL  1PC                                             ',
                '   BAG 1 -  NO FEE       CARRYON HAND BAGGAGE ALLOWANCE   ',
                ' OZ SELMNL  1PC                                             ',
                '   BAG 1 -  NO FEE       CARRYON HAND BAGGAGE ALLOWANCE   ',
                ' OZ MNLSEL  1PC                                             ',
                '   BAG 1 -  NO FEE       CARRYON HAND BAGGAGE ALLOWANCE   ',
                ' OZ SELLAX  1PC                                             ',
                '   BAG 1 -  NO FEE       CARRYON HAND BAGGAGE ALLOWANCE   ',
                ' UA LAXSAT  1PC                                             ',
                '   BAG 1 -  NO FEE       CARRYON HAND BAGGAGE ALLOWANCE   ',
                'BAGGAGE DISCOUNTS MAY APPLY BASED ON FREQUENT FLYER STATUS/',
                'ONLINE CHECKIN/FORM OF PAYMENT/MILITARY/ETC.',
                '',
            ]),
            {
                'pricingBlockList': [
                    {
                        'baggageInfo': {
                            'parsed': {
                                'baggageAllowanceBlocks': [
                                    {
                                        'paxTypeCode': 'ADT',
                                        'segments': [
                                            {
                                                'segmentDetails': {
                                                    'departureAirport': 'SAT',
                                                    'destinationAirport': 'SEL',
                                                },
                                            },
                                        ],
                                    },
                                ],
                            },
                        },
                    },
                ],
            },
        ]);

        // >$BB0; outputs "$BB0-1" instead of $B-1
        $list.push([
            php.implode(php.PHP_EOL, [
                '>$BB0',
                'REBOOK SUCCESSFULLY COMPLETED',
                '*FARE GUARANTEED AT TICKET ISSUANCE*',
                'E-TKT REQUIRED',
                'LAST DATE TO PURCHASE TICKET: 10JUN17',
                '$BB0-1 C01JUN17     ',
                'KIV PS X/IEV BT RIX M791.54CIF NUC791.54END ROE0.944989',
                'FARE EUR 748.00 EQU USD 834.00 TAX 2.80JQ TAX 10.00MD TAX',
                '6.90WW TAX 4.00UA TAX 2.00UD TAX 8.50YK TAX 9.00YQ TAX 15.00YR',
                'TOT USD 892.20  ',
                'TICKETING AGENCY 1O3K',
                'DEFAULT PLATING CARRIER PS',
                'RATE USED IN EQU TOTAL IS BSR 1EUR - 1.11553USD',
                'BAGGAGE ALLOWANCE',
                'ADT                                                         ',
                ' PS KIVRIX  2PC                                             ',
                '   BAG 1 -  NO FEE       UPTO70LB/32KG AND UPTO62LI/158LCM',
                '   BAG 2 -  NO FEE       UPTO70LB/32KG AND UPTO62LI/158LCM',
                '   MYTRIPANDMORE.COM/BAGGAGEDETAILSPS.BAGG',
                '                                                                CARRY ON ALLOWANCE',
                ' PS KIVIEV  12K                                             ',
                '   BAG 1 -  CHGS MAY APPLY IF BAGS EXCEED TTL WT ALLOWANCE',
                '                                    BDBF         ',
                '   BAG 2 -  CHGS MAY APPLY IF BAGS EXCEED TTL WT ALLOWANCE',
                ' BT IEVRIX  2PC                                             ',
                '   BAG 1 -  NO FEE       CARRYON HAND BAGGAGE ALLOWANCE   ',
                '   BAG 2 -  NO FEE       CARRYON HAND BAGGAGE ALLOWANCE   ',
                'BAGGAGE DISCOUNTS MAY APPLY BASED ON FREQUENT FLYER STATUS/',
                'ONLINE CHECKIN/FORM OF PAYMENT/MILITARY/ETC.',
            ]),
            {
                'pricingBlockList': [
                    {
                        'passengerNumbers': [1],
                        'lastDateToPurchaseTicket': {'parsed': '2017-06-10'},
                        'fareConstruction': {
                            'segments': [
                                {'airline': 'PS', 'destination': 'IEV'},
                                {'airline': 'BT', 'destination': 'RIX', 'fare': '791.54', 'fareBasis': 'CIF'},
                            ],
                            'amountCharged': {'currency': 'USD','amount': '892.20'},
                        },
                    },
                ],
            },
        ]);

        // >$BBA; outputs "$BBA-1" instead of $B-1
        $list.push([
            php.implode(php.PHP_EOL, [
                '>$BBA-*1O3K',
                '*FARE GUARANTEED AT TICKET ISSUANCE*',
                'E-TKT REQUIRED',
                'BOOK PNR SEGMENTS     ',
                'LAST DATE TO PURCHASE TICKET: 10JUN17',
                '$BBA-1 C01JUN17     ',
                'KIV PS X/IEV BT RIX M791.54CIF NUC791.54END ROE0.944989',
                'FARE EUR 748.00 EQU USD 834.00 TAX 2.80JQ TAX 10.00MD TAX',
                '6.90WW TAX 4.00UA TAX 2.00UD TAX 8.50YK TAX 9.00YQ TAX 15.00YR',
                'TOT USD 892.20  ',
                'TICKETING AGENCY 1O3K',
                'DEFAULT PLATING CARRIER PS',
                'RATE USED IN EQU TOTAL IS BSR 1EUR - 1.11553USD',
                'BAGGAGE ALLOWANCE',
                'ADT                                                         ',
                ' PS KIVRIX  2PC                                             ',
                '   BAG 1 -  NO FEE       UPTO70LB/32KG AND UPTO62LI/158LCM',
                '   BAG 2 -  NO FEE       UPTO70LB/32KG AND UPTO62LI/158LCM',
                '   MYTRIPANDMORE.COM/BAGGAGEDETAILSPS.BAGG',
                '                                                                CARRY ON ALLOWANCE',
                ' PS KIVIEV  12K                                             ',
                '   BAG 1 -  CHGS MAY APPLY IF BAGS EXCEED TTL WT ALLOWANCE',
                '                                    BDBF         ',
                '   BAG 2 -  CHGS MAY APPLY IF BAGS EXCEED TTL WT ALLOWANCE',
                ' BT IEVRIX  2PC                                             ',
                '   BAG 1 -  NO FEE       CARRYON HAND BAGGAGE ALLOWANCE   ',
                '   BAG 2 -  NO FEE       CARRYON HAND BAGGAGE ALLOWANCE   ',
                'BAGGAGE DISCOUNTS MAY APPLY BASED ON FREQUENT FLYER STATUS/',
                'ONLINE CHECKIN/FORM OF PAYMENT/MILITARY/ETC.',
            ]),
            {
                'pricingBlockList': [
                    {
                        'passengerNumbers': [1],
                        'lastDateToPurchaseTicket': {'parsed': '2017-06-10'},
                        'fareConstruction': {
                            'segments': [
                                {'airline': 'PS', 'destination': 'IEV'},
                                {'airline': 'BT', 'destination': 'RIX', 'fare': '791.54', 'fareBasis': 'CIF'},
                            ],
                            'amountCharged': {'currency': 'USD','amount': '892.20'},
                        },
                    },
                ],
            },
        ]);

        // '>$BBQ01;' should not be glued to pricing command
        $list.push([
            php.implode(php.PHP_EOL, [
                '>$BB-*1O3K',
                '*FARE GUARANTEED AT TICKET ISSUANCE*',
                'E-TKT REQUIRED',
                'REBOOK PNR SEGMENTS   1Z/2C',
                '>$BBQ01;',
                '                           ',
                'LAST DATE TO PURCHASE TICKET: 10JUN17',
                '$BB-1 C01JUN17     ',
                'KIV PS X/IEV BT RIX M791.54CIF NUC791.54END ROE0.944989',
                'FARE EUR 748.00 EQU USD 834.00 TAX 2.80JQ TAX 10.00MD TAX',
                '6.90WW TAX 4.00UA TAX 2.00UD TAX 8.50YK TAX 9.00YQ TAX 15.00YR',
                'TOT USD 892.20  ',
                'TICKETING AGENCY 1O3K',
                'DEFAULT PLATING CARRIER PS',
                'RATE USED IN EQU TOTAL IS BSR 1EUR - 1.11553USD',
                'BAGGAGE ALLOWANCE',
                'ADT                                                         ',
                ' PS KIVRIX  2PC                                             ',
                '   BAG 1 -  NO FEE       UPTO70LB/32KG AND UPTO62LI/158LCM',
                '   BAG 2 -  NO FEE       UPTO70LB/32KG AND UPTO62LI/158LCM',
                '   MYTRIPANDMORE.COM/BAGGAGEDETAILSPS.BAGG',
                '                                                                CARRY ON ALLOWANCE',
                ' PS KIVIEV  12K                                             ',
                '   BAG 1 -  CHGS MAY APPLY IF BAGS EXCEED TTL WT ALLOWANCE',
                '                                    BDBF         ',
                '   BAG 2 -  CHGS MAY APPLY IF BAGS EXCEED TTL WT ALLOWANCE',
                ' BT IEVRIX  2PC                                             ',
                '   BAG 1 -  NO FEE       CARRYON HAND BAGGAGE ALLOWANCE   ',
                '   BAG 2 -  NO FEE       CARRYON HAND BAGGAGE ALLOWANCE   ',
                'BAGGAGE DISCOUNTS MAY APPLY BASED ON FREQUENT FLYER STATUS/',
                'ONLINE CHECKIN/FORM OF PAYMENT/MILITARY/ETC.',
            ]),
            {
//                'pricingCommandCopy' => '>$BB-*1O3K>$BBQ01;', // wrong
                'pricingCommandCopy': '>$BB-*1O3K',
                'parsedPricingCommand': {
                    'isManualPricingRecord': false,
                    'pricingModifiers': [
                        {'raw': '-*1O3K','type': 'segments','parsed': {'privateFaresPcc': '1O3K'}},
                    ],
                },
            },
        ]);

        // non-sequential ATFQ pax numbers in ptc blocks are separated through "/"
        $list.push([
            php.implode(php.PHP_EOL, [
                '>$BN1|2|3|4*CNN|5|6|7*CNN|8/-*1O3K',
                '*FARE GUARANTEED AT TICKET ISSUANCE*',
                '',
                '*FARE HAS A PLATING CARRIER RESTRICTION*',
                'E-TKT REQUIRED',
                '        **CARRIER MAY OFFER ADDITIONAL SERVICES**SEE >$B/DASO\u00B7',
                '*PENALTY APPLIES*',
                'LAST DATE TO PURCHASE TICKET: 10DEC17',
                '$B-1-3/5-6/8 C07AUG17     ',
                'KIV OS X/VIE OS RIX 668.88Y13CLS9 NUC668.88END ROE0.891032',
                'FARE EUR 596.00 EQU USD 707.00 TAX 3.00JQ TAX 10.70MD TAX',
                '7.40WW TAX 9.90AT TAX 21.90ZY TAX 94.80YQ TAX 19.00YR TOT USD',
                '873.70  ',
                'S1 NVB10DEC/NVA10DEC',
                'S2 NVB10DEC/NVA10DEC',
                'E FARE RESTRICTION MAY APPLY',
                'TICKETING AGENCY 1O3K',
                'DEFAULT PLATING CARRIER OS',
                'RATE USED IN EQU TOTAL IS BSR 1EUR - 1.185793USD',
                'BAGGAGE ALLOWANCE',
                'ADT                                                         ',
                ' OS KIVRIX  1PC                                             ',
                '   BAG 1 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   BAG 2 -  1605 MDL     UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   MYTRIPANDMORE.COM/BAGGAGEDETAILSOS.BAGG',
                '                                                                ',
                'CARRY ON ALLOWANCE',
                ' OS KIVVIE  1PC                                             ',
                '   BAG 1 -  NO FEE       UPTO18LB/8KG AND UPTO46LI/118LCM ',
                ' BT VIERIX  1PC                                             ',
                '   BAG 1 -  NO FEE       CARRYON HAND BAGGAGE ALLOWANCE   ',
                '        **CARRIER MAY OFFER ADDITIONAL SERVICES**SEE >$B/DASO\u00B7',
                '*PENALTY APPLIES*',
                'BEST FARE FOR PSGR TYPE',
                'LAST DATE TO PURCHASE TICKET: 10DEC17',
                '$B-4/7 C07AUG17     ',
                'KIV OS X/VIE OS RIX 668.88Y13CLS9 NUC668.88END ROE0.891032',
                'FARE EUR 596.00 EQU USD 707.00 TAX 3.00JQ TAX 10.70MD TAX',
                '7.40WW TAX 9.90AT TAX 21.90ZY TAX 94.80YQ TAX 19.00YR TOT USD',
                '873.70  ',
                'S1 NVB10DEC/NVA10DEC',
                'S2 NVB10DEC/NVA10DEC',
                'E FARE RESTRICTION MAY APPLY',
                'TICKETING AGENCY 1O3K',
                'DEFAULT PLATING CARRIER OS',
                'RATE USED IN EQU TOTAL IS BSR 1EUR - 1.185793USD',
                'BAGGAGE ALLOWANCE',
                'CNN                                                         ',
                ' OS KIVRIX  1PC                                             ',
                '   BAG 1 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   BAG 2 -  1605 MDL     UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   MYTRIPANDMORE.COM/BAGGAGEDETAILSOS.BAGG',
                '                                                                ',
                'CARRY ON ALLOWANCE',
                ' OS KIVVIE  1PC                                             ',
                '   BAG 1 -  NO FEE       UPTO18LB/8KG AND UPTO46LI/118LCM ',
                ' BT VIERIX  1PC                                             ',
                '   BAG 1 -  NO FEE       CARRYON HAND BAGGAGE ALLOWANCE   ',
                'BAGGAGE DISCOUNTS MAY APPLY BASED ON FREQUENT FLYER STATUS/',
                'ONLINE CHECKIN/FORM OF PAYMENT/MILITARY/ETC.',
                '',
            ]),
            {
                'pricingBlockList': [
                    {
                        'passengerNumbers': [1,2,3,5,6,8],
                        'fareConstruction': {
                            'fareAndMarkup': {'currency': 'EUR','amount': '596.00'},
                            'fareEquivalent': {'amount': '707.00','currency': 'USD'},
                            'amountCharged': {'currency': 'USD','amount': '873.70'},
                        },
                        'baggageInfo': {
                            'parsed': {
                                'baggageAllowanceBlocks': [
                                    {'paxTypeCode': 'ADT'},
                                ],
                            },
                        },
                    },
                    {
                        'passengerNumbers': [4,7],
                        'baggageInfo': {
                            'parsed': {
                                'baggageAllowanceBlocks': [
                                    {'paxTypeCode': 'CNN'},
                                ],
                            },
                        },
                        'fareConstruction': {
                            'fareAndMarkup': {'currency': 'EUR','amount': '596.00'},
                            'fareEquivalent': {'amount': '707.00','currency': 'USD'},
                            'amountCharged': {'currency': 'USD','amount': '873.70'},
                        },
                    },
                ],
                'parsedPricingCommand': {
                    'pricingModifiers': [
                        {
                            'raw': 'N1|2|3|4*CNN|5|6|7*CNN|8',
                            'type': 'passengers',
                            'parsed': {
                                'passengerProperties': [
                                    {'passengerNumber': 1},
                                    {'passengerNumber': 2},
                                    {'passengerNumber': 3},
                                    {'passengerNumber': 4, 'ptc': 'CNN'},
                                    {'passengerNumber': 5},
                                    {'passengerNumber': 6},
                                    {'passengerNumber': 7, 'ptc': 'CNN'},
                                    {'passengerNumber': 8},
                                ],
                            },
                        },
                    ],
                },
            },
        ]);

        // output of >$BBQ01; (rebook to lowest fare) for some reason has no "*"
        // in the "-*{pcc}", this makes command in the top part of pricing invalid,
        // but we want to parse it nevertheless since it contains the pricing pcc
        // oh, and also the error in diag annoys me a lot
        $list.push([
            php.implode(php.PHP_EOL, [
                '>$BBS2-2G2H|3-2G2H',
                '*FARE HAS A PLATING CARRIER RESTRICTION*',
                'E-TKT REQUIRED',
                'REBOOK SUCCESSFULLY COMPLETED',
                '',
                '** PRIVATE FARES SELECTED **  ',
                '*PENALTY APPLIES*',
                'LAST DATE TO PURCHASE TICKET: 07DEC17',
                '$BB-1 P10AUG17     ',
                'WAS ET X/ADD ET DAR 381.60HKOWUS NUC381.60END ROE1.0',
                'FARE USD 382.00 TAX 5.60AY TAX 18.00US TAX 4.50XF TAX 8.62YQ',
                'TAX 262.00YR TOT USD 680.72 ',
                'S1 NVB07DEC/NVA07DEC',
                'S2 NVB08DEC/NVA08DEC',
                'TOUR CODE: WAS14034       ',
                'TICKETING AGENCY 2G2H',
                'DEFAULT PLATING CARRIER ET',
                'US PFC: XF IAD4.5 ',
                'BAGGAGE ALLOWANCE',
                'ADT                                                         ',
                ' ET WASDAR  2PC                                             ',
                '   BAG 1 -  NO FEE       UPTO50LB/23KG                    ',
                '   BAG 2 -  NO FEE       UPTO50LB/23KG                    ',
                '                                                                CARRY ON ALLOWANCE',
                ' ET WASADD  1PC                                             ',
                '   BAG 1 -  NO FEE       UPTO15LB/7KG AND UPTO45LI/115LCM ',
                ' ET ADDDAR  1PC                                             ',
                '   BAG 1 -  NO FEE       UPTO15LB/7KG AND UPTO45LI/115LCM ',
                'BAGGAGE DISCOUNTS MAY APPLY BASED ON FREQUENT FLYER STATUS/',
                'ONLINE CHECKIN/FORM OF PAYMENT/MILITARY/ETC.',
                '',
            ]),
            {
                'pricingCommandCopy': '>$BBS2-2G2H|3-2G2H',
                'parsedPricingCommand': {
                    'baseCmd': '$BB',
                    'pricingModifiers': [
                        {
                            'raw': 'S2-2G2H|3-2G2H',
                            'type': 'segments',
                            'parsed': {
                                'privateFaresPcc': '2G2H',
                                'bundles': [
                                    {'segmentNumbers': ['2']},
                                    {'segmentNumbers': ['3']},
                                ],
                            },
                        },
                    ],
                },
            },
        ]);

        // with /OCUA/ modifier - no DEFAULT PLATING CARRIER line
        $list.push([
            php.implode(php.PHP_EOL, [
                '>$BB-*2CV4/OCUA',
                '*FARE HAS A PLATING CARRIER RESTRICTION*',
                'E-TKT REQUIRED',
                'NO REBOOK REQUIRED',
                '',
                '** PRIVATE FARES SELECTED **  ',
                '*PENALTY APPLIES*',
                'LAST DATE TO PURCHASE TICKET: 15SEP17',
                '$BB-1 P15SEP17 - CAT35',
                'EUG UA SFO 108.01LFA2AFEN LH X/FRA LH THR 403.42SK06RCE/SPLT8',
                'LH X/FRA LH SFO 34.50KKXNC7NS/SPLT8 UA EUG 145.23VFA4AFEN',
                'NUC691.16 -DISCOUNTED FARES SELECTED ---END ROE1.0',
                'FARE USD 691.00 TAX 11.20AY TAX 36.00US TAX 3.96XA TAX 13.50XF',
                'TAX 7.00XY TAX 5.50YC TAX 22.80DE TAX 51.00RA TAX 4.80I6 TAX',
                '8.80IR TAX 450.00YQ TOT USD 1305.56  ',
                'S1 NVB21OCT/NVA21OCT',
                'S2 NVB21OCT/NVA21OCT',
                'S3 NVB22OCT/NVA22OCT',
                'S4 NVB09NOV/NVA09NOV',
                'S5 NVB09NOV/NVA09NOV',
                'S6 NVB09NOV/NVA09NOV',
                'E MARKUP CAP UP TO PUB FARE',
                'E PAYMENT/ CK VI CA AX DS',
                'TOUR CODE: 815ZU          ',
                'US PFC: XF EUG4.5 SFO4.5 SFO4.5 ',
                'BAGGAGE ALLOWANCE',
                'ADT                                                         ',
                ' UA EUGTHR  2PC                                             ',
                '   BAG 1 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   BAG 2 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   MYTRIPANDMORE.COM/BAGGAGEDETAILSUA.BAGG',
                '                                                                 UA THREUG  2PC                                             ',
                '   BAG 1 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   BAG 2 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   MYTRIPANDMORE.COM/BAGGAGEDETAILSUA.BAGG',
                '                                                                CARRY ON ALLOWANCE',
                ' UA EUGSFO  1PC                                             ',
                '   BAG 1 -  NO FEE       CARRYON HAND BAGGAGE ALLOWANCE   ',
                ' LH SFOFRA  1PC                                             ',
                '   BAG 1 -  NO FEE       UPTO18LB/8KG AND UPTO46LI/118LCM ',
                ' LH FRATHR  1PC                                             ',
                '   BAG 1 -  NO FEE       UPTO18LB/8KG AND UPTO46LI/118LCM ',
                ' LH THRFRA  1PC                                             ',
                '   BAG 1 -  NO FEE       UPTO18LB/8KG AND UPTO46LI/118LCM ',
                ' LH FRASFO  1PC                                             ',
                '   BAG 1 -  NO FEE       UPTO18LB/8KG AND UPTO46LI/118LCM ',
                ' UA SFOEUG  1PC                                             ',
                '   BAG 1 -  NO FEE       CARRYON HAND BAGGAGE ALLOWANCE   ',
                'BAGGAGE DISCOUNTS MAY APPLY BASED ON FREQUENT FLYER STATUS/',
                'ONLINE CHECKIN/FORM OF PAYMENT/MILITARY/ETC.',
            ]),
            {
                'pricingCommandCopy': '>$BB-*2CV4/OCUA',
                'parsedPricingCommand': {
                    'baseCmd': '$BB',
                    'pricingModifiers': [
                        {'raw': '-*2CV4'},
                        {
                            'raw': 'OCUA',
                            'type': 'overrideCarrier',
                            'parsed': 'UA',
                        },
                    ],
                },
            },
        ]);

        // PQT PQ id - 7563368, two-letter fare basis
        // old parser would parse NUC as destination and END as fare basis - should check that
        // parsed FC has the total price and fallback to new parser manually if it does not
        $list.push([
            php.implode(php.PHP_EOL, [
                '>$BB-2G55',
                '*FARE GUARANTEED AT TICKET ISSUANCE*',
                '',
                '*FARE HAS A PLATING CARRIER RESTRICTION*',
                'E-TKT REQUIRED',
                'REBOOK SUCCESSFULLY COMPLETED',
                '',
                '*PENALTY APPLIES*',
                'LAST DATE TO PURCHASE TICKET: 16SEP17',
                '$BB-1 C13SEP17     ',
                'LAX KE SEL 1530.00BLX0ZUAR KE MNL 227.25EKEKS KE SEL',
                '227.26EKEKS KE X/SFO KE LAX M2370.00YR NUC4354.51END ROE1.0',
                'FARE USD 4355.00 TAX 11.20AY TAX 36.00US TAX 3.96XA TAX 9.00XF',
                'TAX 7.00XY TAX 5.50YC TAX 17.80BP TAX 10.80LI TAX 4.50YQ TOT',
                'USD 4460.76  ',
                'S2 /NVA26SEP',
                'S3 /NVA26SEP',
                'E NONENDS.',
                'E RISS CHRG APPLY.',
                'E 2.NONENDS.',
                'E RISS CHRG APPLY-KRW70000.',
                'E RFND PNTY APPLY.',
                'E NO MILE UG.',
                'TICKETING AGENCY 2G55',
                'DEFAULT PLATING CARRIER KE',
                'US PFC: XF LAX4.5 SFO4.5 ',
                'BAGGAGE ALLOWANCE',
                'ADT                                                         ',
                ' KE LAXMNL  2PC                                             ',
                '   BAG 1 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   BAG 2 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '                                                                 KE MNLLAX  2PC                                             ',
                '   BAG 1 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   BAG 2 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '                                                                CARRY ON ALLOWANCE',
                ' KE LAXSEL  1PC                                             ',
                '   BAG 1 -  NO FEE       UPTO26LB/12KG AND UPTO45LI/115LCM',
                ' KE SELMNL  1PC                                             ',
                '   BAG 1 -  NO FEE       UPTO26LB/12KG AND UPTO45LI/115LCM',
                ' KE MNLSEL  1PC                                             ',
                '   BAG 1 -  NO FEE       UPTO26LB/12KG AND UPTO45LI/115LCM',
                ' KE SELSFO  1PC                                             ',
                '   BAG 1 -  NO FEE       UPTO26LB/12KG AND UPTO45LI/115LCM',
                ' DL SFOLAX  1PC                                             ',
                '   BAG 1 -  NO FEE       PERSONAL ITEM                    ',
                '                                                                EMBARGO - FOR BAGGAGE LIMITATIONS SEE ',
                ' DL SFOLAX  88                                              ',
                '                                                                BAGGAGE DISCOUNTS MAY APPLY BASED ON FREQUENT FLYER STATUS/',
                'ONLINE CHECKIN/FORM OF PAYMENT/MILITARY/ETC.',
            ]),
            {
                'pricingBlockList': [
                    {
                        'fareConstruction': {
                            'segments': [
                                {'destination': 'SEL', 'fare': '1530.00', 'fareBasis': 'BLX0ZUAR'},
                                {'destination': 'MNL', 'fare': '227.25', 'fareBasis': 'EKEKS'},
                                {'destination': 'SEL', 'fare': '227.26', 'fareBasis': 'EKEKS'},
                                {'destination': 'SFO'},
                                {'destination': 'LAX', 'fare': '2370.00', 'fareBasis': 'YR'},
                            ],
                            'currency': 'NUC',
                            'fareAndMarkupInNuc': '4354.51',
                            'rateOfExchange': '1.0',
                            'fareAndMarkup': {'currency': 'USD','amount': '4355.00'},
                            'amountCharged': {'currency': 'USD','amount': '4460.76'},
                        },
                        'ticketingAgencyPcc': '2G55',
                        'defaultPlatingCarrier': 'KE',
                    },
                ],
            },
        ]);

        // two letter fare basis again
        // PQT #7171614
        $list.push([
            php.implode(php.PHP_EOL, [
                '>$B-*2G52',
                '*FARE GUARANTEED AT TICKET ISSUANCE*',
                '',
                'E-TKT REQUIRED',
                '        **CARRIER MAY OFFER ADDITIONAL SERVICES**SEE >$B/DASO;',
                '*PENALTY APPLIES*',
                'LAST DATE TO PURCHASE TICKET: 13SEP17',
                '$B-1 C10SEP17     ',
                'JAX AA X/DFW AA X/SEL KE CEB M477.00NLX4B4M1 KA X/HKG AA X/DFW',
                'AA JAX M2934.50YR NUC3411.50END ROE1.0',
                'FARE USD 3412.00 TAX 11.20AY TAX 36.00US TAX 3.96XA TAX 13.50XF',
                'TAX 7.00XY TAX 5.50YC TAX 8.90BP TAX 20.50G3 TAX 15.40HK TAX',
                '5.80I5 TAX 327.10YR TAX 0.90YQ TOT USD 3867.76  ',
                'S1 NVB20FEB/NVA20FEB',
                'S2 NVB20FEB/NVA20FEB',
                'S3 NVB21FEB/NVA21FEB',
                'S4 /NVA20AUG',
                'S5 NVB27FEB/NVA20AUG',
                'S6 NVB27FEB/NVA20AUG',
                'E FEE FOR CHANGE/REFUND',
                'TICKETING AGENCY 2G52',
                'DEFAULT PLATING CARRIER AA',
                'US PFC: XF JAX4.5 DFW4.5 DFW4.5 ',
                'BAGGAGE ALLOWANCE',
                'ADT                                                         ',
                ' AA JAXCEB  2PC                                             ',
                '   BAG 1 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   BAG 2 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   MYTRIPANDMORE.COM/BAGGAGEDETAILSAA.BAGG',
                '                                                                 AA CEBJAX  2PC                                             ',
                '   BAG 1 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   BAG 2 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   MYTRIPANDMORE.COM/BAGGAGEDETAILSAA.BAGG',
                '                                                                CARRY ON ALLOWANCE',
                ' AA JAXDFW  2PC                                             ',
                '   BAG 1 -  NO FEE       UPTO45LI/115LCM                  ',
                '   BAG 2 -  NO FEE       CARRYON HAND BAGGAGE ALLOWANCE   ',
                ' AA DFWSEL  2PC                                             ',
                '   BAG 1 -  NO FEE       UPTO45LI/115LCM                  ',
                '   BAG 2 -  NO FEE       CARRYON HAND BAGGAGE ALLOWANCE   ',
                ' KE SELCEB  1PC                                             ',
                '   BAG 1 -  NO FEE       UPTO26LB/12KG AND UPTO45LI/115LCM',
                ' CX CEBHKG  1PC                                             ',
                '   BAG 1 -  NO FEE       UPTO15LB/7KG AND UPTO45LI/115LCM ',
                ' AA HKGDFW  2PC                                             ',
                '   BAG 1 -  NO FEE       UPTO45LI/115LCM                  ',
                '   BAG 2 -  NO FEE       CARRYON HAND BAGGAGE ALLOWANCE   ',
                ' AA DFWJAX  2PC                                             ',
                '   BAG 1 -  NO FEE       UPTO45LI/115LCM                  ',
                '   BAG 2 -  NO FEE       CARRYON HAND BAGGAGE ALLOWANCE   ',
                '                                                                EMBARGO - FOR BAGGAGE LIMITATIONS SEE ',
                ' AA JAXDFW  MYTRIPANDMORE.COM/BAGGAGEDETAILSAA.BAGG         ',
                ' AA DFWSEL  MYTRIPANDMORE.COM/BAGGAGEDETAILSAA.BAGG         ',
                ' AA HKGDFW  MYTRIPANDMORE.COM/BAGGAGEDETAILSAA.BAGG         ',
                ' AA DFWJAX  MYTRIPANDMORE.COM/BAGGAGEDETAILSAA.BAGG         ',
                '                                                                BAGGAGE DISCOUNTS MAY APPLY BASED ON FREQUENT FLYER STATUS/',
                'ONLINE CHECKIN/FORM OF PAYMENT/MILITARY/ETC.',
            ]),
            {
                'pricingBlockList': [
                    {
                        'fareConstruction': {
                            'segments': [
                                {'destination': 'DFW'},
                                {'destination': 'SEL'},
                                {'destination': 'CEB', 'fare': '477.00', 'fareBasis': 'NLX4B4M1'},
                                {'destination': 'HKG'},
                                {'destination': 'DFW'},
                                {'destination': 'JAX', 'fare': '2934.50', 'fareBasis': 'YR'},
                            ],
                            'currency': 'NUC',
                            'fareAndMarkupInNuc': '3411.50',
                            'rateOfExchange': '1.0',
                        },
                    },
                ],
            },
        ]);

        // "Q14N4" fare basis was treated as "Q14" fuel surcharge and "N4" airline
        // PQT #7153870
        $list.push([
            php.implode(php.PHP_EOL, [
                '>$BB-2G55',
                '*FARE GUARANTEED AT TICKET ISSUANCE*',
                '',
                '*FARE HAS A PLATING CARRIER RESTRICTION*',
                'E-TKT REQUIRED',
                'REBOOK SUCCESSFULLY COMPLETED',
                '',
                '*PENALTY APPLIES*',
                'LAST DATE TO PURCHASE TICKET: 11SEP17',
                '$BB-1 C10SEP17     ',
                'PDX VX LAX 86.51LVVVN5 TK X/IST TK MBA 291.00PV3XPC TK X/IST TK',
                'LAX 213.50UV3XPC AS PDX 157.21Q14N4 NUC748.22END ROE1.0',
                'FARE USD 748.00 TAX 11.20AY TAX 36.00US TAX 3.96XA TAX 13.50XF',
                'TAX 7.00XY TAX 5.50YC TAX 12.00TR TAX 50.00TU TAX 488.00YR TOT',
                'USD 1375.16  ',
                'S1 NVB10DEC/NVA10DEC',
                'S2 NVB10DEC/NVA10DEC',
                'S3 NVB11DEC/NVA11DEC',
                'S4 NVB28DEC/NVA28DEC',
                'S5 NVB28DEC/NVA28DEC',
                'S6 NVB28DEC/NVA28DEC',
                'E NONREF FEES APPLY',
                'E NONEND/TK ONLY',
                'E VALID AS/NON-RFD',
                'E CHNG SUBJ TO FEE',
                'TICKETING AGENCY 2G55',
                'DEFAULT PLATING CARRIER TK',
                'US PFC: XF PDX4.5 LAX4.5 LAX4.5 ',
                'BAGGAGE ALLOWANCE',
                'ADT                                                         ',
                ' TK PDXMBA  2PC                                             ',
                '   BAG 1 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   BAG 2 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '                                                                 TK MBAPDX  2PC                                             ',
                '   BAG 1 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   BAG 2 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '                                                                CARRY ON ALLOWANCE',
                ' VX PDXLAX  1PC                                             ',
                '   BAG 1 -  NO FEE       CARRY ON PERSONAL ITEM           ',
                '   BAG 2 -  0.0 USD      CARRY ON PERSONAL ITEM           ',
                '   BAG 3 -  0.0 USD      CARRY ON PERSONAL ITEM           ',
                ' TK LAXIST  1PC                                             ',
                '   BAG 1 -  NO FEE       CARRYON HAND BAGGAGE ALLOWANCE   ',
                ' TK ISTMBA  1PC                                             ',
                '   BAG 1 -  NO FEE       CARRYON HAND BAGGAGE ALLOWANCE   ',
                ' TK MBAIST  1PC                                             ',
                '   BAG 1 -  NO FEE       CARRYON HAND BAGGAGE ALLOWANCE   ',
                ' TK ISTLAX  1PC                                             ',
                '   BAG 1 -  NO FEE       CARRYON HAND BAGGAGE ALLOWANCE   ',
                ' AS LAXPDX  1PC                                             ',
                '   BAG 1 -  NO FEE       CARRY ON PERSONAL ITEM           ',
                '   BAG 2 -  0.0 USD      CARRY ON PERSONAL ITEM           ',
                '   BAG 3 -  0.0 USD      CARRY ON PERSONAL ITEM           ',
                'BAGGAGE DISCOUNTS MAY APPLY BASED ON FREQUENT FLYER STATUS/',
                'ONLINE CHECKIN/FORM OF PAYMENT/MILITARY/ETC.',
                '',
            ]),
            {
                'pricingBlockList': [
                    {
                        'fareConstruction': {
                            'segments': [
                                {'destination': 'LAX', 'fare': '86.51', 'fareBasis': 'LVVVN5'},
                                {'destination': 'IST'},
                                {'destination': 'MBA', 'fare': '291.00', 'fareBasis': 'PV3XPC'},
                                {'destination': 'IST'},
                                {'destination': 'LAX', 'fare': '213.50', 'fareBasis': 'UV3XPC'},
                                {'destination': 'PDX', 'fare': '157.21', 'fareBasis': 'Q14N4'},
                            ],
                            'currency': 'NUC',
                            'fareAndMarkupInNuc': '748.22',
                            'rateOfExchange': '1.0',
                        },
                    },
                ],
            },
        ]);

        // session 3205700
        // typo (or truncated?) in baggage size units: "LC" instead of "LCM"
        $list.push([
            php.implode(php.PHP_EOL, [
                '>$BB-2G2H',
                '*FARE GUARANTEED AT TICKET ISSUANCE*',
                '',
                '*FARE HAS A PLATING CARRIER RESTRICTION*',
                'E-TKT REQUIRED',
                'REBOOK SUCCESSFULLY COMPLETED',
                '',
                '*PENALTY APPLIES*',
                'LAST DATE TO PURCHASE TICKET: 12FEB18',
                '$BB-1 C09FEB18     ',
                'MIA AY MAD 60.00ONN0Z2S5 AA MIA 60.00ONN0Z2S5 NUC120.00END',
                'ROE1.0',
                'FARE USD 120.00 TAX 5.60AY TAX 36.60US TAX 3.96XA TAX 4.50XF',
                'TAX 7.00XY TAX 5.65YC TAX 27.20JD TAX 0.70OG TAX 4.50QV TAX',
                '300.00YR TOT USD 515.71  ',
                'S1 NVB15FEB/NVA15FEB',
                'S2 NVB27FEB/NVA27FEB',
                'E NONREF/RESTRICTIONS APPLY',
                'TICKETING AGENCY 2G2H',
                'DEFAULT PLATING CARRIER AY',
                'US PFC: XF MIA4.5 ',
                'BAGGAGE ALLOWANCE',
                'ADT                                                         ',
                ' AY MIAMAD  1PC                                             ',
                '   BAG 1 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   BAG 2 -  100.00 USD   UPTO50LB/23KG AND UPTO62LI/158LCM',
                '                                                                 AY MADMIA  1PC                                             ',
                '   BAG 1 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   BAG 2 -  93.00 USD    UPTO70LB/32KG AND UPTO130LI/330LC',
                '                                                                CARRY ON ALLOWANCE',
                ' AA MIAMAD  2PC                                             ',
                '   BAG 1 -  NO FEE       UPTO45LI/115LCM                  ',
                '   BAG 2 -  NO FEE       CARRYON HAND BAGGAGE ALLOWANCE   ',
                ' IB MADMIA  1PC                                             ',
                '   BAG 1 -  NO FEE       CARRYON HAND BAGGAGE ALLOWANCE   ',
                '                                                                EMBARGO - FOR BAGGAGE LIMITATIONS SEE ',
                ' AA MIAMAD  88                                              ',
                '                                                                BAGGAGE DISCOUNTS MAY APPLY BASED ON FREQUENT FLYER STATUS/',
                'ONLINE CHECKIN/FORM OF PAYMENT/MILITARY/ETC.',
            ]),
            {
                'pricingBlockList': [
                    {
                        'passengerNumbers': [1],
                        'fareConstruction': {
                            'segments': [
                                {'destination': 'MAD', 'fare': '60.00', 'fareBasis': 'ONN0Z2S5'},
                                {'destination': 'MIA', 'fare': '60.00', 'fareBasis': 'ONN0Z2S5'},
                            ],
                            'fareAndMarkup': {'currency': 'USD','amount': '120.00'},
                            'amountCharged': {'currency': 'USD','amount': '515.71'},
                        },
                        'defaultPlatingCarrier': 'AY',
                        'baggageInfo': {
                            'parsed': {
                                'baggageAllowanceBlocks': [
                                    {
                                        'paxTypeCode': 'ADT',
                                        'segments': [
                                            {
                                                'segmentDetails': {'departureAirport': 'MIA', 'destinationAirport': 'MAD'},
                                                'bags': [
                                                    {
                                                        'flags': ['noFeeFlag'],
                                                        'weightInLb': '50',
                                                        'weightInKg': '23',
                                                        'sizeInInches': '62',
                                                        'sizeInCm': '158',
                                                    },
                                                    {
                                                        'flags': [],
                                                        'weightInLb': '50',
                                                        'weightInKg': '23',
                                                        'sizeInInches': '62',
                                                        'sizeInCm': '158',
                                                        'feeAmount': '100.00',
                                                        'feeCurrency': 'USD',
                                                    },
                                                ],
                                            },
                                            {
                                                'segmentDetails': {'departureAirport': 'MAD', 'destinationAirport': 'MIA'},
                                                'bags': [
                                                    {
                                                        'flags': ['noFeeFlag'],
                                                        'weightInLb': '50',
                                                        'weightInKg': '23',
                                                        'sizeInInches': '62',
                                                        'sizeInCm': '158',
                                                    },
                                                    {
                                                        'flags': [],
                                                        'weightInLb': '70',
                                                        'weightInKg': '32',
                                                        'sizeInInches': '130',
                                                        'sizeInCm': '330',
                                                        'feeAmount': '93.00',
                                                        'feeCurrency': 'USD',
                                                    },
                                                ],
                                            },
                                        ],
                                    },
                                ],
                                'carryOnAllowanceBlock': {
                                    'segments': [
                                        {
                                            'segmentDetails': {'departureAirport': 'MIA', 'destinationAirport': 'MAD'},
                                            'bags': [
                                                {
                                                    'flags': ['noFeeFlag'],
                                                    'sizeInInches': '45',
                                                    'sizeInCm': '115',
                                                },
                                                {
                                                    'flags': ['noFeeFlag','carryOnBaggageAllowance'],
                                                    'bagDescription': 'CARRYON HAND BAGGAGE ALLOWANCE',
                                                },
                                            ],
                                        },
                                        {
                                            'segmentDetails': {'departureAirport': 'MAD', 'destinationAirport': 'MIA'},
                                            'bags': [
                                                {
                                                    'flags': ['noFeeFlag','carryOnBaggageAllowance'],
                                                    'bagDescription': 'CARRYON HAND BAGGAGE ALLOWANCE',
                                                },
                                            ],
                                        },
                                    ],
                                },
                            },
                        },
                    },
                ],
            },
        ]);

        // another "LC" example
        $list.push([
            php.implode(php.PHP_EOL, [
                '>$BBJCB/-2CV4',
                '*FARE GUARANTEED AT TICKET ISSUANCE*',
                '',
                '*FARE HAS A PLATING CARRIER RESTRICTION*',
                'E-TKT REQUIRED',
                'REBOOK SUCCESSFULLY COMPLETED',
                '',
                '*PENALTY APPLIES*',
                'BEST FARE FOR PSGR TYPE',
                'LAST DATE TO PURCHASE TICKET: 11FEB18',
                '$BB-1 C08FEB18     ',
                'MIA AY X/LON BA ROM M71.00OHX9T1S5 IB X/MAD BA MIA Q75.00Q',
                'ROMMIA10.00M71.00OHX9T1S5 NUC227.00END ROE1.0',
                'FARE USD 227.00 TAX 5.60AY TAX 36.60US TAX 3.96XA TAX 4.50XF',
                'TAX 7.00XY TAX 5.65YC TAX 20.40UB TAX 3.10EX TAX 9.30HB TAX',
                '21.80IT TAX 1.10MJ TAX 3.90VT TAX 16.70JD TAX 0.70OG TAX 2.70QV',
                'TAX 150.00YR TAX 150.00YQ TOT USD 670.01   ',
                'S1 NVB03JUL/NVA03JUL',
                'S2 NVB04JUL/NVA04JUL',
                'S3 NVB25JUL/NVA25JUL',
                'S4 NVB25JUL/NVA25JUL',
                'E NONREF/RESTRICTIONS APPLY',
                'SUM IDENTIFIED AS UB IS A PASSENGER SERVICE CHARGE',
                'TICKETING AGENCY 2CV4',
                'DEFAULT PLATING CARRIER AY',
                'US PFC: XF MIA4.5 ',
                'BAGGAGE ALLOWANCE',
                'JCB                                                         ',
                ' AY MIAROM  1PC                                             ',
                '   BAG 1 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   BAG 2 -  100.00 USD   UPTO50LB/23KG AND UPTO62LI/158LCM',
                '                                                                 AY ROMMIA  1PC                                             ',
                '   BAG 1 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   BAG 2 -  93.00 USD    UPTO70LB/32KG AND UPTO130LI/330LC',
                '                                                                CARRY ON ALLOWANCE',
                ' BA MIALON  1PC                                             ',
                '   BAG 1 -  NO FEE       UPTO50LB/23KG AND UPTO50LB/127LCM',
                ' BA LONROM  1PC                                             ',
                '   BAG 1 -  NO FEE       UPTO50LB/23KG AND UPTO50LB/127LCM',
                ' IB ROMMAD  1PC                                             ',
                '   BAG 1 -  NO FEE       CARRYON HAND BAGGAGE ALLOWANCE   ',
                ' AA MADMIA  2PC                                             ',
                '   BAG 1 -  NO FEE       UPTO45LI/115LCM                  ',
                '   BAG 2 -  NO FEE       CARRYON HAND BAGGAGE ALLOWANCE   ',
                '                                                                EMBARGO - FOR BAGGAGE LIMITATIONS SEE ',
                ' BA MIALON  88                                              ',
                ' BA LONROM  88                                              ',
                ' AA MADMIA  88                                              ',
                '                                                                BAGGAGE DISCOUNTS MAY APPLY BASED ON FREQUENT FLYER STATUS/',
                'ONLINE CHECKIN/FORM OF PAYMENT/MILITARY/ETC.',
            ]),
            {
                'pricingBlockList': [
                    {
                        'fareConstruction': {
                            'fareAndMarkup': {'currency': 'USD','amount': '227.00'},
                            'amountCharged': {'currency': 'USD','amount': '670.01'},
                        },
                        'baggageInfo': {
                            'parsed': {
                                'baggageAllowanceBlocks': [
                                    {
                                        'paxTypeCode': 'JCB',
                                        'segments': [
                                            {
                                                'segmentDetails': {'departureAirport': 'MIA', 'destinationAirport': 'ROM'},
                                                'bags': [
                                                    {
                                                        'weightInLb': '50',
                                                        'weightInKg': '23',
                                                        'sizeInInches': '62',
                                                        'sizeInCm': '158',
                                                    },
                                                    {
                                                        'weightInLb': '50',
                                                        'weightInKg': '23',
                                                        'sizeInInches': '62',
                                                        'sizeInCm': '158',
                                                    },
                                                ],
                                            },
                                            {
                                                'segmentDetails': {'departureAirport': 'ROM', 'destinationAirport': 'MIA'},
                                                'bags': [
                                                    {
                                                        'weightInLb': '50',
                                                        'weightInKg': '23',
                                                        'sizeInInches': '62',
                                                        'sizeInCm': '158',
                                                    },
                                                    {
                                                        'weightInLb': '70',
                                                        'weightInKg': '32',
                                                        'sizeInInches': '130',
                                                        'sizeInCm': '330',
                                                    },
                                                ],
                                            },
                                        ],
                                    },
                                ],
                            },
                        },
                    },
                ],
            },
        ]);

        // '   BAG 1 -  NO FEE       UPTO22LB/10KG AND 55L X 40W X 25H',
        // when you price this:
        // 0 SU 101T 19DEC JFKSVO SS1
        // 0 SU 520T 20DEC SVODXB SS1
        // 0 SU 525Q 03JAN DXBSVO SS1
        // 0 SU 100Q 03JAN SVOJFK SS1
        $list.push([
            php.implode(php.PHP_EOL, [
                '>$BB0',
                'REBOOK SUCCESSFULLY COMPLETED',
                '',
                '*FARE GUARANTEED AT TICKET ISSUANCE*',
                '',
                '*FARE HAS A PLATING CARRIER RESTRICTION*',
                'E-TKT REQUIRED',
                '*PENALTY APPLIES*',
                'BEST FARE FOR PSGR TYPE',
                'LAST DATE TO PURCHASE TICKET: 14APR18',
                '$BB0-1 C10APR18     ',
                'NYC SU X/MOW SU DXB 225.00TVULA SU X/MOW SU NYC 265.00QVULA',
                'NUC490.00END ROE1.0',
                'FARE USD 490.00 TAX 5.60AY TAX 36.60US TAX 3.96XA TAX 4.50XF',
                'TAX 7.00XY TAX 5.65YC TAX 18.00RI TAX 20.40AE TAX 9.50F6 TAX',
                '1.40TP TAX 2.80ZR TAX 385.60YQ TOT USD 991.01  ',
                'S1 NVB19DEC/NVA19DEC',
                'S2 NVB20DEC/NVA20DEC',
                'S3 NVB03JAN/NVA03JAN',
                'S4 NVB03JAN/NVA03JAN',
                'E NONREF/HEBO3BPATEH',
                'TICKETING AGENCY 1RZ2',
                'DEFAULT PLATING CARRIER SU',
                'US PFC: XF JFK4.5 ',
                'BAGGAGE ALLOWANCE',
                'JWZ                                                         ',
                ' SU NYCDXB  1PC                                             ',
                '   BAG 1 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   BAG 2 -  100.00 USD   UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   MYTRIPANDMORE.COM/BAGGAGEDETAILSSU.BAGG',
                '                                                                ',
                ' SU DXBNYC  1PC                                             ',
                '   BAG 1 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   BAG 2 -  100.00 USD   UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   MYTRIPANDMORE.COM/BAGGAGEDETAILSSU.BAGG',
                '                                                                ',
                'CARRY ON ALLOWANCE',
                ' SU NYCMOW  1PC                                             ',
                '   BAG 1 -  NO FEE       UPTO22LB/10KG AND 55L X 40W X 25H',
                '   BAG 2 -  0.0 USD      PET IN CABIN                     ',
                ' SU MOWDXB  1PC                                             ',
                '   BAG 1 -  NO FEE       UPTO22LB/10KG AND 55L X 40W X 25H',
                '   BAG 2 -  0.0 RUB      PET IN CABIN                     ',
                ' SU DXBMOW  1PC                                             ',
                '   BAG 1 -  NO FEE       UPTO22LB/10KG AND 55L X 40W X 25H',
                '   BAG 2 -  0.0 AED      PET IN CABIN                     ',
                ' SU MOWNYC  1PC                                             ',
                '   BAG 1 -  NO FEE       UPTO22LB/10KG AND 55L X 40W X 25H',
                '   BAG 2 -  0.0 RUB      PET IN CABIN                     ',
                'BAGGAGE DISCOUNTS MAY APPLY BASED ON FREQUENT FLYER STATUS/',
                'ONLINE CHECKIN/FORM OF PAYMENT/MILITARY/ETC.',
                '',
            ]),
            {
                'pricingBlockList': [
                    {
                        'fareConstruction': {
                            'fareAndMarkup': {'currency': 'USD','amount': '490.00'},
                            'amountCharged': {'currency': 'USD','amount': '991.01'},
                        },
                        'baggageInfo': {
                            'parsed': {
                                'baggageAllowanceBlocks': [
                                    {
                                        'paxTypeCode': 'JWZ',
                                        'segments': [
                                            {
                                                'segmentDetails': {'departureAirport': 'NYC', 'destinationAirport': 'DXB'},
                                                'bags': [
                                                    {'weightInLb': '50', 'weightInKg': '23', 'sizeInInches': '62', 'sizeInCm': '158'},
                                                    {'weightInLb': '50', 'weightInKg': '23', 'sizeInInches': '62', 'sizeInCm': '158'},
                                                ],
                                            },
                                            {
                                                'segmentDetails': {'departureAirport': 'DXB', 'destinationAirport': 'NYC'},
                                                'bags': [
                                                    {'weightInLb': '50', 'weightInKg': '23', 'sizeInInches': '62', 'sizeInCm': '158'},
                                                    {'weightInLb': '50', 'weightInKg': '23', 'sizeInInches': '62', 'sizeInCm': '158'},
                                                ],
                                            },
                                        ],
                                    },
                                ],
                                'carryOnAllowanceBlock': {
                                    'segments': [
                                        {
                                            'bags': [
                                                {'weightInLb': '22', 'weightInKg': '10', 'sizeInCm': 120},
                                                {'bagDescription': 'PET IN CABIN'},
                                            ],
                                        },
                                        {
                                            'bags': [
                                                {'weightInLb': '22', 'weightInKg': '10', 'sizeInCm': 120},
                                                {'bagDescription': 'PET IN CABIN'},
                                            ],
                                        },
                                        {
                                            'bags': [
                                                {'weightInLb': '22', 'weightInKg': '10', 'sizeInCm': 120},
                                                {'bagDescription': 'PET IN CABIN'},
                                            ],
                                        },
                                        {
                                            'bags': [
                                                {'weightInLb': '22', 'weightInKg': '10', 'sizeInCm': 120},
                                                {'bagDescription': 'PET IN CABIN'},
                                            ],
                                        },
                                    ],
                                },
                            },
                        },
                    },
                ],
            },
        ]);

        // command copy wrapped part starts with asterisk - should unwrap correctly nevertheless
        $list.push([
            php.implode(php.PHP_EOL, [
                '>$B/N1-1*ADT*IF50|2-1*ADT*IF50|6-1*ADT*IF50|7-1*ADT*IF50|8-1*ADT',
                '*IF50|9-1*ADT*IF50/-*1O3K/IT8SDANINUCW/Z$50.00/ET',
                '*FARE HAS A PLATING CARRIER RESTRICTION*',
                'E-TKT REQUIRED',
                '** PRIVATE FARES SELECTED **  ',
                '*PENALTY APPLIES*',
                'LAST DATE TO PURCHASE TICKET: 30JUN18',
                '$B-1-6 P21JUN18 - CAT35',
                'SFO KE X/SEL KE MNL 354.05QKW0ZPMV/NET1V93Q3Z KE X/SEL KE SFO',
                '586.80KKG8XRZD/NET1V93Q3Z PC50.00 NUC990.85 ----- MUST PRICE AS',
                'B JCB/ A -----END ROE1.0',
                'FARE USD 991.00 TAX 5.60AY TAX 36.60US TAX 3.96XA TAX 4.50XF',
                'TAX 7.00XY TAX 5.65YC TAX 18.00BP TAX 10.30LI TAX 3.60YQ TAX',
                '120.00YR TOT USD 1206.21  ',
                'S4 NVB22DEC',
                'E NET1VVVSC2 - HHPRUSD25',
                'E NET1V93Q3Z - HHPRUSD50',
                'TOUR CODE: 8SDANINUCW     ',
                'TICKETING AGENCY 1O3K',
                'DEFAULT PLATING CARRIER KE',
                'US PFC: XF SFO4.5 ',
                'BAGGAGE ALLOWANCE',
                'ADT                                                         ',
                ' KE SFOMNL  2PC                                             ',
                '   BAG 1 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   BAG 2 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   MYTRIPANDMORE.COM/BAGGAGEDETAILSKE.BAGG',
                '                                                                ',
                ' KE MNLSFO  2PC                                             ',
                '   BAG 1 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   BAG 2 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   MYTRIPANDMORE.COM/BAGGAGEDETAILSKE.BAGG',
                '                                                                ',
                'CARRY ON ALLOWANCE',
                ' KE SFOSEL  1PC                                             ',
                '   BAG 1 -  NO FEE       UPTO26LB/12KG AND UPTO45LI/115LCM',
                ' KE SELMNL  1PC                                             ',
                '   BAG 1 -  NO FEE       UPTO26LB/12KG AND UPTO45LI/115LCM',
                ' KE MNLSEL  1PC                                             ',
                '   BAG 1 -  NO FEE       UPTO26LB/12KG AND UPTO45LI/115LCM',
                ' KE SELSFO  1PC                                             ',
                '   BAG 1 -  NO FEE       UPTO26LB/12KG AND UPTO45LI/115LCM',
                'BAGGAGE DISCOUNTS MAY APPLY BASED ON FREQUENT FLYER STATUS/',
                'ONLINE CHECKIN/FORM OF PAYMENT/MILITARY/ETC.',
            ]),
            {
                'pricingCommandCopy': '>$B/N1-1*ADT*IF50|2-1*ADT*IF50|6-1*ADT*IF50|7-1*ADT*IF50|8-1*ADT*IF50|9-1*ADT*IF50/-*1O3K/IT8SDANINUCW/Z$50.00/ET',
            },
        ]);

        // Airports before fare: ADDENU387.00VKESUS; FcRecursiveParser also fails for some reason
        $list.push([
            php.implode(php.PHP_EOL, [
                '>$BN1-1|2-1/:N',
                '*FARE GUARANTEED AT TICKET ISSUANCE*',
                '',
                '*FARE HAS A PLATING CARRIER RESTRICTION*',
                'E-TKT REQUIRED',
                '*PENALTY APPLIES*',
                'LAST DATE TO PURCHASE TICKET: 25DEC18',
                '$B-1 C02JUL18     ',
                'WAS ET ADD ET ENU ADDENU387.00VKESUS ET X/ADD ET WAS',
                '504.50KKEEUS NUC891.50END ROE1.0',
                'FARE USD 892.00 TAX 5.60AY TAX 36.60US TAX 3.96XA TAX 4.50XF',
                'TAX 7.00XY TAX 5.65YC TAX 2.50IH TAX 1.00L3 TAX 50.00QT TAX',
                '20.00TE TAX 8.62YQ TAX 524.00YR TOT USD 1561.43  ',
                'S1 NVB25DEC/NVA25DEC',
                'S2 NVB27DEC/NVA27DEC',
                'S3 NVB17JAN/NVA17JAN',
                'S4 NVB17JAN/NVA17JAN',
                'TICKETING AGENCY 1O3K',
                'DEFAULT PLATING CARRIER ET',
                'US PFC: XF IAD4.5 ',
                'BAGGAGE ALLOWANCE',
                'ADT                                                         ',
                ' ET WASADD  2PC                                             ',
                '   BAG 1 -  NO FEE       UPTO50LB/23KG                    ',
                '   BAG 2 -  NO FEE       UPTO50LB/23KG                    ',
                '   VIEWTRIP.TRAVELPORT.COM/BAGGAGEPOLICY/ET',
                '                                                                 ET ADDENU  2PC                                             ',
                '   BAG 1 -  NO FEE       UPTO50LB/23KG                    ',
                '   BAG 2 -  NO FEE       UPTO50LB/23KG                    ',
                '   VIEWTRIP.TRAVELPORT.COM/BAGGAGEPOLICY/ET',
                '                                                                 ET ENUWAS  2PC                                             ',
                '   BAG 1 -  NO FEE       UPTO50LB/23KG                    ',
                '   BAG 2 -  NO FEE       UPTO50LB/23KG                    ',
                '   VIEWTRIP.TRAVELPORT.COM/BAGGAGEPOLICY/ET',
                '                                                                CARRY ON ALLOWANCE',
                ' ET WASADD  1PC                                             ',
                '   BAG 1 -  NO FEE       UPTO15LB/7KG AND UPTO45LI/115LCM ',
                ' ET ADDENU  1PC                                             ',
                '   BAG 1 -  NO FEE       UPTO15LB/7KG AND UPTO45LI/115LCM ',
                ' ET ENUADD  1PC                                             ',
                '   BAG 1 -  NO FEE       UPTO15LB/7KG AND UPTO45LI/115LCM ',
                ' ET ADDWAS  1PC                                             ',
                '   BAG 1 -  NO FEE       UPTO15LB/7KG AND UPTO45LI/115LCM ',
                '*PENALTY APPLIES*',
                'LAST DATE TO PURCHASE TICKET: 25DEC18',
                '$B-2 C02JUL18     ',
                'WAS ET ADD ET ENU ADDENU290.25VKESUSCH ET X/ADD ET WAS',
                '378.37KKEEUSCH NUC668.62END ROE1.0',
                'FARE USD 669.00 TAX 5.60AY TAX 36.60US TAX 3.96XA TAX 4.50XF',
                'TAX 7.00XY TAX 5.65YC TAX 2.50IH TAX 1.00L3 TAX 50.00QT TAX',
                '20.00TE TAX 8.62YQ TAX 524.00YR TOT USD 1338.43  ',
                'S1 NVB25DEC/NVA25DEC',
                'S2 NVB27DEC/NVA27DEC',
                'S3 NVB17JAN/NVA17JAN',
                'S4 NVB17JAN/NVA17JAN',
                'TICKETING AGENCY 1O3K',
                'DEFAULT PLATING CARRIER ET',
                'US PFC: XF IAD4.5 ',
                'BAGGAGE ALLOWANCE',
                'CNN                                                         ',
                ' ET WASADD  2PC                                             ',
                '   BAG 1 -  NO FEE       UPTO50LB/23KG                    ',
                '   BAG 2 -  NO FEE       UPTO50LB/23KG                    ',
                '   VIEWTRIP.TRAVELPORT.COM/BAGGAGEPOLICY/ET',
                '                                                                 ET ADDENU  2PC                                             ',
                '   BAG 1 -  NO FEE       UPTO50LB/23KG                    ',
                '   BAG 2 -  NO FEE       UPTO50LB/23KG                    ',
                '   VIEWTRIP.TRAVELPORT.COM/BAGGAGEPOLICY/ET',
                '                                                                 ET ENUWAS  2PC                                             ',
                '   BAG 1 -  NO FEE       UPTO50LB/23KG                    ',
                '   BAG 2 -  NO FEE       UPTO50LB/23KG                    ',
                '   VIEWTRIP.TRAVELPORT.COM/BAGGAGEPOLICY/ET',
                '                                                                CARRY ON ALLOWANCE',
                ' ET WASADD  1PC                                             ',
                '   BAG 1 -  NO FEE       UPTO15LB/7KG AND UPTO45LI/115LCM ',
                ' ET ADDENU  1PC                                             ',
                '   BAG 1 -  NO FEE       UPTO15LB/7KG AND UPTO45LI/115LCM ',
                ' ET ENUADD  1PC                                             ',
                '   BAG 1 -  NO FEE       UPTO15LB/7KG AND UPTO45LI/115LCM ',
                ' ET ADDWAS  1PC                                             ',
                '   BAG 1 -  NO FEE       UPTO15LB/7KG AND UPTO45LI/115LCM ',
                'BAGGAGE DISCOUNTS MAY APPLY BASED ON FREQUENT FLYER STATUS/',
                'ONLINE CHECKIN/FORM OF PAYMENT/MILITARY/ETC.',
            ]),
            {
            },
        ]);
        $list.push([
            php.implode(php.PHP_EOL, [
                '>$B-*1O3K@JRT7/ET',
                '          **AGENT SELECTED FARE USED**',
                '',
                'E-TKT REQUIRED',
                'LAST DATE TO PURCHASE TICKET: 02APR17',
                '$B-1-7 M23JAN17     ',
                'HKG CX OSA Q5.80 1618.57JRT7 CX HKG 1618.57JRT7 NUC3242.94END',
                'ROE7.75684',
                'FARE HKD 25160  EQU USD 3244.00 TAX 20.60G3 TAX 15.50HK TAX',
                '2.70OI TAX 23.80SW TOT USD 3306.60 ',
                'E T1',
                'TICKETING AGENCY 1O3K',
                'DEFAULT PLATING CARRIER CX',
                '         THE FOLLOWING RULES FAILED FOR JRT7    ',
                '              BOOKING CLASS',
                '         THE FOLLOWING RULES FAILED FOR JRT7    ',
                '              BOOKING CLASS',
                'RATE USED IN EQU TOTAL IS BSR 1HKD - 0.12892USD',
                'BAGGAGE ALLOWANCE',
                'ADT                                                         ',
                ' CX HKGOSA  40K                                             ',
                '   BAG 1 -  CHGS MAY APPLY IF BAGS EXCEED TTL WT ALLOWANCE',
                '   BAG 2 -  CHGS MAY APPLY IF BAGS EXCEED TTL WT ALLOWANCE',
                '   MYTRIPANDMORE.COM/BAGGAGEDETAILSCX.BAGG',
                '                                                                ',
                ' CX OSAHKG  40K                                             ',
                '   BAG 1 -  CHGS MAY APPLY IF BAGS EXCEED TTL WT ALLOWANCE',
                '   BAG 2 -  CHGS MAY APPLY IF BAGS EXCEED TTL WT ALLOWANCE',
                '   MYTRIPANDMORE.COM/BAGGAGEDETAILSCX.BAGG',
                '                                                                ',
                'CARRY ON ALLOWANCE',
                ' CX HKGOSA  1PC                                             ',
                '   BAG 1 -  NO FEE       UPTO22LB/10KG AND UPTO45LI/115LCM',
                ' CX OSAHKG  1PC                                             ',
                '   BAG 1 -  NO FEE       UPTO22LB/10KG AND UPTO45LI/115LCM',
                'BAGGAGE DISCOUNTS MAY APPLY BASED ON FREQUENT FLYER STATUS/',
                'ONLINE CHECKIN/FORM OF PAYMENT/MILITARY/ETC.',
                '',
            ]),
            {
                'pricingBlockList': [
                    {
                        'defaultPlatingCarrier': 'CX',
                        'unparsedInfoLines': [
                            '         THE FOLLOWING RULES FAILED FOR JRT7    ',
                            '              BOOKING CLASS',
                            '         THE FOLLOWING RULES FAILED FOR JRT7    ',
                            '              BOOKING CLASS',
                        ],
                        'baggageInfo': {
                            'parsed': {
                                'baggageAllowanceBlocks': [
                                    {
                                        'paxTypeCode': 'ADT',
                                        'segments': [{'segmentDetails': {'departureAirport': 'HKG','destinationAirport': 'OSA'}}],
                                    },
                                ],
                            },
                        },
                    },
                ],
            },
        ]);

        // LAST DATE TO PURCHASE TICKET w/ TZ and time (only date is verified in the test!)
        $list.push([
            php.implode(php.PHP_EOL, [
                '>$BN1-1/:N',
                '*FARE GUARANTEED AT TICKET ISSUANCE*',
                '',
                '*FARE HAS A PLATING CARRIER RESTRICTION*',
                'E-TKT REQUIRED',
                '*PENALTY APPLIES*',
                'LAST DATE TO PURCHASE TICKET: 27MAR19 / 1055 YTO',
                '$B-1 C02JUL18     ',
                'WAS ET ADD ET ENU ADDENU387.00VKESUS ET X/ADD ET WAS',
                '504.50KKEEUS NUC891.50END ROE1.0',
                'FARE USD 892.00 TAX 5.60AY TAX 36.60US TAX 3.96XA TAX 4.50XF',
                'TAX 7.00XY TAX 5.65YC TAX 2.50IH TAX 1.00L3 TAX 50.00QT TAX',
                '20.00TE TAX 8.62YQ TAX 524.00YR TOT USD 1561.43  ',
                'S1 NVB25DEC/NVA25DEC',
                'S2 NVB27DEC/NVA27DEC',
                'S3 NVB17JAN/NVA17JAN',
                'S4 NVB17JAN/NVA17JAN',
                'TICKETING AGENCY 1O3K',
                'DEFAULT PLATING CARRIER ET',
                'US PFC: XF IAD4.5 ',
                'BAGGAGE ALLOWANCE',
                'ADT                                                         ',
                ' ET WASADD  2PC                                             ',
                '   BAG 1 -  NO FEE       UPTO50LB/23KG                    ',
                '   BAG 2 -  NO FEE       UPTO50LB/23KG                    ',
                '   VIEWTRIP.TRAVELPORT.COM/BAGGAGEPOLICY/ET',
                '                                                                 ET ADDENU  2PC                                             ',
                '   BAG 1 -  NO FEE       UPTO50LB/23KG                    ',
                '   BAG 2 -  NO FEE       UPTO50LB/23KG                    ',
                '   VIEWTRIP.TRAVELPORT.COM/BAGGAGEPOLICY/ET',
                '                                                                 ET ENUWAS  2PC                                             ',
                '   BAG 1 -  NO FEE       UPTO50LB/23KG                    ',
                '   BAG 2 -  NO FEE       UPTO50LB/23KG                    ',
                '   VIEWTRIP.TRAVELPORT.COM/BAGGAGEPOLICY/ET',
                '                                                                CARRY ON ALLOWANCE',
                ' ET WASADD  1PC                                             ',
                '   BAG 1 -  NO FEE       UPTO15LB/7KG AND UPTO45LI/115LCM ',
                ' ET ADDENU  1PC                                             ',
                '   BAG 1 -  NO FEE       UPTO15LB/7KG AND UPTO45LI/115LCM ',
                ' ET ENUADD  1PC                                             ',
                '   BAG 1 -  NO FEE       UPTO15LB/7KG AND UPTO45LI/115LCM ',
                ' ET ADDWAS  1PC                                             ',
                '   BAG 1 -  NO FEE       UPTO15LB/7KG AND UPTO45LI/115LCM ',
                '*PENALT APPLIES*',
            ]),
            {
                'pricingBlockList': [{ 'lastDateToPurchaseTicket': {'parsed': '2019-03-27'}}],
            },
        ]);

        // no taxes, should not fail
        $list.push([
            php.implode(php.PHP_EOL, [
                '>$B-*2F3K',
                '*FARE GUARANTEED AT TICKET ISSUANCE*',
                '*FARE HAS A PLATING CARRIER RESTRICTION*',
                'E-TKT REQUIRED',
                '*PENALTY APPLIES*',
                'LAST DATE TO PURCHASE TICKET: 03JUN19',
                '$B-1 C27MAR19     ',
                'TLV IZ ETH 85.00YMW IZ TLV 85.00YMW USD170.00END',
                'FARE USD 170.00 TOT USD 170.00',
                'TICKETING AGENCY 2F3K',
                'DEFAULT PLATING CARRIER IZ',
                'BAGGAGE ALLOWANCE',
                'ADT                                                         ',
                ' IZ TLVETH  20K                                             ',
                '   BAG 1 -  CHGS MAY APPLY IF BAGS EXCEED TTL WT ALLOWANCE',
                '   BAG 2 -  CHGS MAY APPLY IF BAGS EXCEED TTL WT ALLOWANCE',
                '   VIEWTRIP.TRAVELPORT.COM/BAGGAGEPOLICY/IZ',
                '                                                                ',
                ' IZ ETHTLV  20K                                             ',
                '   BAG 1 -  CHGS MAY APPLY IF BAGS EXCEED TTL WT ALLOWANCE',
                '   BAG 2 -  CHGS MAY APPLY IF BAGS EXCEED TTL WT ALLOWANCE',
                '   VIEWTRIP.TRAVELPORT.COM/BAGGAGEPOLICY/IZ',
                '                                                                ',
                'CARRY ON ALLOWANCE',
                ' IZ TLVETH  08K                                             ',
                '   BAG 1 -  CHGS MAY APPLY IF BAGS EXCEED TTL WT ALLOWANCE',
                '                                    BDBF         ',
                '   BAG 2 -  CHGS MAY APPLY IF BAGS EXCEED TTL WT ALLOWANCE',
                ' IZ ETHTLV  08K                                             ',
                '   BAG 1 -  CHGS MAY APPLY IF BAGS EXCEED TTL WT ALLOWANCE',
                '   BAG 2 -  CHGS MAY APPLY IF BAGS EXCEED TTL WT ALLOWANCE',
                'BAGGAGE DISCOUNTS MAY APPLY BASED ON FREQUENT FLYER STATUS/',
                'ONLINE CHECKIN/FORM OF PAYMENT/MILITARY/ETC.',
            ]),
            {
            },
        ]);

        // with "MULTIPLE BOOKING CODES APPLY"
        $list.push([
            php.implode(php.PHP_EOL, [
                '>$BB-*15JE',
                'E-TKT REQUIRED',
                'MULTIPLE BOOKING CODES APPLY ',
                ' BOOK PNR SEGMENTS ',
                '  PIC CNN             1P/2O',
                '** PRIVATE FARES SELECTED **  ',
                '*PENALTY APPLIES*',
                'TICKETING WITHIN 72 HOURS AFTER RESERVATION',
                'LAST DATE TO PURCHASE TICKET: 13APR19 / 1847 DTT',
                '$BB-1-2 A10APR19     ',
                'MIA AV CTG 123.00OEF009US AV MIA 123.00OEF009US NUC246.00END',
                'ROE1.0',
                'FARE USD 246.00 TAX 5.60AY TAX 37.20US TAX 3.96XA TAX 4.50XF',
                'TAX 7.00XY TAX 5.77YC TAX 44.00CO TAX 15.00JS TOT USD 369.03 ',
                'S1 NVB20JUN/NVA20JUN',
                'S2 NVB01JUL/NVA01JUL',
                'E REFUND FEE APPLIES/',
                'E CHANGE FEE APPLIES',
                'E AND PLUS FARE DIFF/NON END',
                'TOUR CODE: ITU101         ',
                'TICKETING AGENCY 15JE',
                'DEFAULT PLATING CARRIER AV',
                'US PFC: XF MIA4.5 ',
                'BAGGAGE ALLOWANCE',
                'ADT                                                         ',
                ' AV MIACTG  1PC                                             ',
                '   BAG 1 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   BAG 2 -  60.00 USD    UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   VIEWTRIP.TRAVELPORT.COM/BAGGAGEPOLICY/AV',
                '                                                                 AV CTGMIA  1PC                                             ',
                '   BAG 1 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   BAG 2 -  60.00 USD    UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   VIEWTRIP.TRAVELPORT.COM/BAGGAGEPOLICY/AV',
                '                                                                CARRY ON ALLOWANCE',
                ' AV MIACTG  10K                                             ',
                '   BAG 1 -  CHGS MAY APPLY IF BAGS EXCEED TTL WT ALLOWANCE',
                '                                    BDBF         ',
                '   BAG 2 -  CHGS MAY APPLY IF BAGS EXCEED TTL WT ALLOWANCE',
                ' AV CTGMIA  10K                                             ',
                '   BAG 1 -  CHGS MAY APPLY IF BAGS EXCEED TTL WT ALLOWANCE',
                '   BAG 2 -  CHGS MAY APPLY IF BAGS EXCEED TTL WT ALLOWANCE',
                '** BEST FARE FOR PRIVATE FARES REQUEST **',
                '*PENALTY APPLIES*',
                'TICKETING WITHIN 72 HOURS AFTER RESERVATION',
                'LAST DATE TO PURCHASE TICKET: 13APR19 / 1847 DTT',
                '$BB-3 C10APR19     ',
                'MIA AV CTG 116.25PEA00RI9/CH25 AV MIA 127.50OEA00RI9/CH25',
                'NUC243.75END ROE1.0',
                'FARE USD 244.00 TAX 5.60AY TAX 37.20US TAX 3.96XA TAX 4.50XF',
                'TAX 7.00XY TAX 5.77YC TAX 44.00CO TAX 15.00JS TOT USD 367.03 ',
                'S1 NVB20JUN/NVA20JUN',
                'S2 NVB01JUL/NVA01JUL',
                'E REFUND FEE APPLIES/',
                'E CHANGE FEE APPLIES',
                'E AND PLUS FARE DIFF/NON END',
                'TICKETING AGENCY 15JE',
                'DEFAULT PLATING CARRIER AV',
                'US PFC: XF MIA4.5 ',
                'BAGGAGE ALLOWANCE',
                'CNN                                                         ',
                ' AV MIACTG  1PC                                             ',
                '   BAG 1 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   BAG 2 -  60.00 USD    UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   VIEWTRIP.TRAVELPORT.COM/BAGGAGEPOLICY/AV',
                '                                                                 AV CTGMIA  1PC                                             ',
                '   BAG 1 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   BAG 2 -  60.00 USD    UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   VIEWTRIP.TRAVELPORT.COM/BAGGAGEPOLICY/AV',
                '                                                                CARRY ON ALLOWANCE',
                ' AV MIACTG  10K                                             ',
                '   BAG 1 -  CHGS MAY APPLY IF BAGS EXCEED TTL WT ALLOWANCE',
                '                                    BDBF         ',
                '   BAG 2 -  CHGS MAY APPLY IF BAGS EXCEED TTL WT ALLOWANCE',
                ' AV CTGMIA  10K                                             ',
                '   BAG 1 -  CHGS MAY APPLY IF BAGS EXCEED TTL WT ALLOWANCE',
                '   BAG 2 -  CHGS MAY APPLY IF BAGS EXCEED TTL WT ALLOWANCE',
                'BAGGAGE DISCOUNTS MAY APPLY BASED ON FREQUENT FLYER STATUS/',
                'ONLINE CHECKIN/FORM OF PAYMENT/MILITARY/ETC.',
            ]),
            {
                wholePricingMarkers: {
                    // '  PIC CNN             1P/2O',
                    rebookSegments: [
                        {ptc: 'CNN', segmentNumber: '1', bookingClass: 'P'},
                        {ptc: 'CNN', segmentNumber: '2', bookingClass: 'O'},
                    ],
                },
                pricingBlockList: [
                    {
                        fareConstruction: {
                            amountCharged: {"currency":"USD","amount":"369.03"},
                        },
                    },
                ],
            },
        ]);

        // 2 letter PTC in BAGGAGE ALLOWANCE
        $list.push([
            [
                ">$BB/*JC/-*2G55",
                "*FARE HAS A PLATING CARRIER RESTRICTION*",
                "E-TKT REQUIRED",
                "NO REBOOK REQUIRED",
                "",
                "** PRIVATE FARES SELECTED **  ",
                "*PENALTY APPLIES*",
                "BEST FARE FOR PSGR TYPE",
                "LAST DATE TO PURCHASE TICKET: 30APR19",
                "$BB-1 P15APR19 - CAT35",
                "NYC PR MNL 489.25TKWFNY/SPL053ZPZ1 PR NYC",
                "441.75UKWFNY/SPL053ZPZ1 NUC931.00 ----- MUST PRICE AS B ----",
                "-END ROE1.0",
                "FARE USD 931.00 TAX 5.60AY TAX 37.20US TAX 3.96XA TAX 4.50XF",
                "TAX 7.00XY TAX 5.77YC TAX 10.60LI TAX 140.00YQ TAX 1.00YR TOT",
                "USD 1146.63  ",
                "S1 /NVA06OCT",
                "S2 NVB09JUL/NVA06OCT",
                "E SPL053ZPZ1-SPLT5",
                "E PAYMENT/ CK VI CA AX",
                "E TOUR CODE US19GPRD2",
                "TOUR CODE: PRRTUSDPH      ",
                "TICKETING AGENCY 2G55",
                "DEFAULT PLATING CARRIER PR",
                "US PFC: XF JFK4.5 ",
                "BAGGAGE ALLOWANCE",
                "JC                                                          ",
                " PR NYCMNL  2PC                                             ",
                "   BAG 1 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM",
                "   BAG 2 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM",
                "   VIEWTRIP.TRAVELPORT.COM/BAGGAGEPOLICY/PR",
                "                                                                 PR MNLNYC  2PC                                             ",
                "   BAG 1 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM",
                "   BAG 2 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM",
                "   VIEWTRIP.TRAVELPORT.COM/BAGGAGEPOLICY/PR",
                "                                                                CARRY ON ALLOWANCE",
                " PR NYCMNL  07K                                             ",
                "   BAG 1 -  CHGS MAY APPLY IF BAGS EXCEED TTL WT ALLOWANCE",
                "                                    BDBF         ",
                "   BAG 2 -  CHGS MAY APPLY IF BAGS EXCEED TTL WT ALLOWANCE",
                " PR MNLNYC  07K                                             ",
                "   BAG 1 -  CHGS MAY APPLY IF BAGS EXCEED TTL WT ALLOWANCE",
                "   BAG 2 -  CHGS MAY APPLY IF BAGS EXCEED TTL WT ALLOWANCE",
                "BAGGAGE DISCOUNTS MAY APPLY BASED ON FREQUENT FLYER STATUS/",
                "ONLINE CHECKIN/FORM OF PAYMENT/MILITARY/ETC.",
            ].join('\n'),
            {
                'pricingBlockList': [
                    {
                        'baggageInfo': {
                            'parsed': {
                                'baggageAllowanceBlocks': [
                                    {
                                        'paxTypeCode': 'JC',
                                        'segments': [
                                            {
                                                'segmentDetails': {
                                                    'departureAirport': 'NYC',
                                                    'destinationAirport': 'MNL',
                                                },
                                            },
                                        ],
                                    },
                                ],
                            },
                        },
                    },
                ],
            },
        ]);

        $list.push([
            [
                ">$B-*2F3K",
                "*FARE GUARANTEED AT TICKET ISSUANCE*",
                "",
                "*FARE HAS A PLATING CARRIER RESTRICTION*",
                "E-TKT REQUIRED",
                "        **CARRIER MAY OFFER ADDITIONAL SERVICES**SEE >$B/DASO;",
                "*PENALTY APPLIES*",
                "TICKETING WITHIN 96 HOURS AFTER RESERVATION",
                "LAST DATE TO PURCHASE TICKET: 19APR19 / 1110 SFO",
                "$B-1 C15APR19     ",
                "SYD FJ NAN 155.36NBULAS FJ LAX 1693.71CBULAURT NUC1849.07END",
                "ROE1.416016",
                "FARE AUD 2619.00 EQU USD 1871.00 TAX 18.60US TAX 3.96XA TAX",
                "7.00XY TAX 5.77YC TAX 42.90AU TAX 22.50WY TAX 4.40EZ TAX 4.40FA",
                "TOT USD 1980.53  ",
                "S1 NVB29APR/NVA29APR",
                "S2 NVB29APR/NVA29APR",
                "E VALID ON FJ ONLY",
                "E NON END/NON REF",
                "E NON END/NON REF",
                "TICKETING AGENCY 2F3K",
                "DEFAULT PLATING CARRIER FJ",
                "RATE USED IN EQU TOTAL IS BSR 1AUD - 0.714495USD",
                "BAGGAGE ALLOWANCE",
                "ADT                                                         ",
                " FJ SYDLAX  3PC                                             ",
                "   BAG 1 -  NO FEE       UPTO66LB/30KG AND UPTO62LI/158LCM",
                "   BAG 2 -  NO FEE       UPTO66LB/30KG AND UPTO62LI/158LCM",
                "   VIEWTRIP.TRAVELPORT.COM/BAGGAGEPOLICY/FJ",
                "                                                                CARRY ON ALLOWANCE",
                " FJ SYDNAN  1PC                                             ",
                "   BAG 1 -  NO FEE       UPTO15LB/7KG AND UPTO45LI/115LCM ",
                "   BAG 2 -  0.0 AUD      CARRY7KG 15LB UPTO 15LI 118CM    ",
                "   BAG 3 -  0.0 AUD      CARRY7KG 15LB UPTO 15LI 118CM    ",
                " FJ NANLAX  2PC                                             ",
                "   BAG 1 -  NO FEE       CARRYON HAND BAGGAGE ALLOWANCE   ",
                "   BAG 2 -  NO FEE       UPTO15LB/7KG AND UPTO45LI/115LCM ",
                "   BAG 3 -  0.0 FJD      UPTO15LB/7KG                     ",
                "   BAG 4 -  0.0 FJD      UPTO15LB/7KG                     ",
                "BAGGAGE DISCOUNTS MAY APPLY BASED ON FREQUENT FLYER STATUS/",
                "ONLINE CHECKIN/FORM OF PAYMENT/MILITARY/ETC.",
            ].join('\n'),
            {
                'pricingBlockList': [
                    {
                        'baggageInfo': {
                            'parsed': {
                                'baggageAllowanceBlocks': [
                                    {
                                        'paxTypeCode': 'ADT',
                                        'segments': [
                                            {
                                                'segmentDetails': {
                                                    'departureAirport': 'SYD',
                                                    'destinationAirport': 'LAX',
                                                },
                                            },
                                        ],
                                    },
                                ],
                                'carryOnAllowanceBlock': {
                                    'segments': [
                                        {
                                            'segmentDetails': {
                                                'departureAirport': 'SYD',
                                                'destinationAirport': 'NAN',
                                            },
                                        },
                                        {
                                            'segmentDetails': {
                                                'departureAirport': 'NAN',
                                                'destinationAirport': 'LAX',
                                            },
                                        },
                                    ],
                                },
                            },
                        },
                    },
                ],
            },
        ]);

        // session #40130
        // child fare construction sum differs from NUC by 1 dollar
        // 25 + 44 + 25 + 44 = 138
        // USD139.00END
        $list.push([
            php.implode(php.PHP_EOL, [
                '>$B/N1|2*C6/-*2F3K',
                '*FARE GUARANTEED AT TICKET ISSUANCE*',
                '',
                'E-TKT REQUIRED',
                '        **CARRIER MAY OFFER ADDITIONAL SERVICES**SEE >$B/DASO;',
                '*PENALTY APPLIES*',
                'TICKETING WITHIN 24 HOURS AFTER RESERVATION',
                'LAST DATE TO PURCHASE TICKET: 18APR19 / 1746 SFO',
                '$B-1 C17APR19     ',
                'MZL AV X/BOG AV ADZ Q MZLADZ38.00 66.00ZEO00RI4 AV X/BOG AV MZL',
                'Q ADZMZL38.00 66.00ZEO00RI4 USD208.00END',
                'FARE USD 208.00 TAX 14.80CO TOT USD 222.80',
                'S1 NVB29AUG/NVA29AUG',
                'S2 NVB29AUG/NVA29AUG',
                'S3 NVB03SEP/NVA03SEP',
                'S4 NVB04SEP/NVA04SEP',
                'E REFUND FEE APPLIES',
                'E CHANGES FOR A FEE AND',
                'E PLUS FARE DIFF/NO ENDORSE',
                'TICKETING AGENCY 2F3K',
                'DEFAULT PLATING CARRIER AV',
                'BAGGAGE ALLOWANCE',
                'ADT                                                         ',
                ' AV MZLADZ  1PC                                             ',
                '   BAG 1 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   BAG 2 -  150000 COP   UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   VIEWTRIP.TRAVELPORT.COM/BAGGAGEPOLICY/AV',
                '                                                                 AV ADZMZL  1PC                                             ',
                '   BAG 1 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   BAG 2 -  150000 COP   UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   VIEWTRIP.TRAVELPORT.COM/BAGGAGEPOLICY/AV',
                '                                                                CARRY ON ALLOWANCE',
                ' AV MZLBOG  10K                                             ',
                '   BAG 1 -  CHGS MAY APPLY IF BAGS EXCEED TTL WT ALLOWANCE',
                '                                    BDBF         ',
                '   BAG 2 -  CHGS MAY APPLY IF BAGS EXCEED TTL WT ALLOWANCE',
                ' AV BOGADZ  10K                                             ',
                '   BAG 1 -  CHGS MAY APPLY IF BAGS EXCEED TTL WT ALLOWANCE',
                '   BAG 2 -  CHGS MAY APPLY IF BAGS EXCEED TTL WT ALLOWANCE',
                ' AV ADZBOG  10K                                             ',
                '   BAG 1 -  CHGS MAY APPLY IF BAGS EXCEED TTL WT ALLOWANCE',
                '   BAG 2 -  CHGS MAY APPLY IF BAGS EXCEED TTL WT ALLOWANCE',
                ' AV BOGMZL  10K                                             ',
                '   BAG 1 -  CHGS MAY APPLY IF BAGS EXCEED TTL WT ALLOWANCE',
                '   BAG 2 -  CHGS MAY APPLY IF BAGS EXCEED TTL WT ALLOWANCE',
                '        **CARRIER MAY OFFER ADDITIONAL SERVICES**SEE >$B/DASO;',
                '*PENALTY APPLIES*',
                'TICKETING WITHIN 24 HOURS AFTER RESERVATION',
                'LAST DATE TO PURCHASE TICKET: 18APR19 / 1746 SFO',
                '$B-2 C17APR19     ',
                'MZL AV X/BOG AV ADZ Q MZLADZ25.00 44.00ZEO00RI4/CH33 AV X/BOG',
                'AV MZL Q ADZMZL25.00 44.00ZEO00RI4/CH33 USD139.00END',
                'FARE USD 139.00 TAX 14.80CO TOT USD 153.80',
                'S1 NVB29AUG/NVA29AUG',
                'S2 NVB29AUG/NVA29AUG',
                'S3 NVB03SEP/NVA03SEP',
                'S4 NVB04SEP/NVA04SEP',
                'E REFUND FEE APPLIES',
                'E CHANGES FOR A FEE AND',
                'E PLUS FARE DIFF/NO ENDORSE',
                'TICKETING AGENCY 2F3K',
                'DEFAULT PLATING CARRIER AV',
                'BAGGAGE ALLOWANCE',
                'CNN                                                         ',
                ' AV MZLADZ  1PC                                             ',
                '   BAG 1 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   BAG 2 -  150000 COP   UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   VIEWTRIP.TRAVELPORT.COM/BAGGAGEPOLICY/AV',
                '                                                                 AV ADZMZL  1PC                                             ',
                '   BAG 1 -  NO FEE       UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   BAG 2 -  150000 COP   UPTO50LB/23KG AND UPTO62LI/158LCM',
                '   VIEWTRIP.TRAVELPORT.COM/BAGGAGEPOLICY/AV',
                '                                                                CARRY ON ALLOWANCE',
                ' AV MZLBOG  10K                                             ',
                '   BAG 1 -  CHGS MAY APPLY IF BAGS EXCEED TTL WT ALLOWANCE',
                '                                    BDBF         ',
                '   BAG 2 -  CHGS MAY APPLY IF BAGS EXCEED TTL WT ALLOWANCE',
                ' AV BOGADZ  10K                                             ',
                '   BAG 1 -  CHGS MAY APPLY IF BAGS EXCEED TTL WT ALLOWANCE',
                '   BAG 2 -  CHGS MAY APPLY IF BAGS EXCEED TTL WT ALLOWANCE',
                ' AV ADZBOG  10K                                             ',
                '   BAG 1 -  CHGS MAY APPLY IF BAGS EXCEED TTL WT ALLOWANCE',
                '   BAG 2 -  CHGS MAY APPLY IF BAGS EXCEED TTL WT ALLOWANCE',
                ' AV BOGMZL  10K                                             ',
                '   BAG 1 -  CHGS MAY APPLY IF BAGS EXCEED TTL WT ALLOWANCE',
                '   BAG 2 -  CHGS MAY APPLY IF BAGS EXCEED TTL WT ALLOWANCE',
                'BAGGAGE DISCOUNTS MAY APPLY BASED ON FREQUENT FLYER STATUS/',
                'ONLINE CHECKIN/FORM OF PAYMENT/MILITARY/ETC.',
                '',
            ]),
            {
                "pricingBlockList": [
                    {
                        "fareConstruction": {
                            "segments": [
                                {"airline":"AV","flags":[{"raw":"X","parsed":"noStopover"}],"destination":"BOG","departure":"MZL"},
                                {"airline":"AV","flags":[],"destination":"ADZ","fuelSurcharge":"38.00","fuelSurchargeParts":["38.00"],"fare":"66.00","fareBasis":"ZEO00RI4","ticketDesignator":null,"departure":"BOG"},
                                {"airline":"AV","flags":[{"raw":"X","parsed":"noStopover"}],"destination":"BOG","departure":"ADZ"},
                                {"airline":"AV","flags":[],"destination":"MZL","fuelSurcharge":"38.00","fuelSurchargeParts":["38.00"],"fare":"66.00","fareBasis":"ZEO00RI4","ticketDesignator":null,"departure":"BOG"}
                            ],
                            "currency": "USD",
                            "fare": "208.00",
                            "fareAndMarkup": {"currency":"USD","amount":"208.00"},
                            "amountCharged": {"currency":"USD","amount":"222.80"}
                        },
                    },
                    {
                        "fareConstruction": {
                            "segments": [
                                {"airline":"AV","flags":[{"raw":"X","parsed":"noStopover"}],"destination":"BOG","departure":"MZL"},
                                {"airline":"AV","flags":[],"destination":"ADZ","fuelSurcharge":"25.00","fuelSurchargeParts":["25.00"],"fare":"44.00","fareBasis":"ZEO00RI4","ticketDesignator":"CH33","departure":"BOG"},
                                {"airline":"AV","flags":[{"raw":"X","parsed":"noStopover"}],"destination":"BOG","departure":"ADZ"},
                                {"airline":"AV","flags":[],"destination":"MZL","fuelSurcharge":"25.00","fuelSurchargeParts":["25.00"],"fare":"44.00","fareBasis":"ZEO00RI4","ticketDesignator":"CH33","departure":"BOG"}
                            ],
                            "currency": "USD",
                            "fare": "139.00",
                            "fareAndMarkup": {"currency":"USD","amount":"139.00"},
                            "taxes": [{"pseudoCountryCode":"CO","amount":"14.80"}],
                            "amountCharged": {"currency":"USD","amount":"153.80"}
                        },
                    }
                ],
            },
        ]);

        return $list;
    }

    /**
     * @test
     * @dataProvider provideDumps
     */
    testParser($dump, $expected)  {
        let $actual;
        $actual = PricingParser.parse($dump);
        try {
            this.assertArrayElementsSubset($expected, $actual);
        } catch (exc) {
            throw exc;
        }
    }

	getTestMapping() {
		return [
			[this.provideDumps, this.testParser],
		];
	}
}
module.exports = PricingParserTest;
